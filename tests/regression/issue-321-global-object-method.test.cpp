/**
 * Generated by C-Next Transpiler from: issue-321-global-object-method.test.cnx
 * A safer C for embedded systems
 */

// test-execution
// Issue #321: global.Object.method() generates :: instead of . for object instances
// Tests: Correct syntax generation for object instances vs classes in C++ mode
//
// KEY DISTINCTION:
//   - Classes with static methods: global.ClassName.method() -> ClassName::method()
//   - Object instances: global.objectName.method() -> objectName.method()
//
// BUG: The transpiler generates Serial::begin() when it should generate Serial.begin()
//      because Serial is declared as "extern HardwareSerial Serial;" (an object instance),
//      not as a class with static methods.
#include "issue-321-global-object-method.hpp"

#include <stdint.h>

// ============================================================================
// SECTION 1: CLASS WITH STATIC METHODS - should use :: syntax
// ============================================================================
void testClassStaticMethods(void) {
    ConfigStorage::load();
    ConfigStorage::save();
    int32_t val = ConfigStorage::getValue("key");
}

// ============================================================================
// SECTION 2: NAMESPACE - should use :: syntax
// ============================================================================
void testNamespace(void) {
    SystemUtils::initialize();
    int32_t status = SystemUtils::getStatus();
}

// ============================================================================
// SECTION 3: OBJECT INSTANCES - should use . syntax (THE BUG)
// ============================================================================
void testObjectInstances(void) {
    Serial.begin(9600);
    Serial.println("Hello");
    Wire.begin();
    Wire.beginTransmission(0x50);
}

// ============================================================================
// SECTION 4: MIXED USAGE
// ============================================================================
void testMixedUsage(void) {
    ConfigStorage::load();
    Serial.begin(115200);
    SystemUtils::initialize();
    Wire.begin();
}

// ============================================================================
// MAIN
// ============================================================================
int main(void) {
    testClassStaticMethods();
    testNamespace();
    testObjectInstances();
    testMixedUsage();
    return 0;
}
