// test-execution
// ADR-045: Test strings in control flow structures
// Validates: string operations in if, while, for conditions
i32 main() {
   
// Test 1-3: String comparison in if condition
    string<32> name <- "Alice";
    u32 result <- 0;

    if (name = "Alice") {
        result <- 1;
    }
    if (result != 1) return 1;

    if (name = "Bob") {
        result <- 2;
    }
    if (result != 1) return 2; // Should still be 1

   
// Test 4-5: String inequality in if
    if (name != "Bob") {
        result <- 3;
    }
    if (result != 3) return 3;

   
// Test 6-8: String length in condition
    string<64> text <- "Hello";
    if (text.char_count = 5) {
        result <- 4;
    }
    if (result != 4) return 4;

    if (text.char_count > 3) {
        result <- 5;
    }
    if (result != 5) return 5;

   
// Test 9-11: While loop with string length
    string<32>[4] items;
    items[0] <- "One";
    items[1] <- "Two";
    items[2] <- "Three";
    items[3] <- "Four";

    u32 totalLen <- 0;
    u32 i <- 0;
    while (i < items.element_count) {
        totalLen <- totalLen + items[i].char_count;
        i <- i + 1;
    }

    // 3 + 3 + 5 + 4 = 15
    if (totalLen != 15) return 6;

   
// Test 12-14: Conditional based on empty string
    string<32> maybeEmpty;
    if (maybeEmpty.char_count = 0) {
        result <- 6;
    }
    if (result != 6) return 7;

    maybeEmpty <- "NotEmpty";
    if (maybeEmpty.char_count != 0) {
        result <- 7;
    }
    if (result != 7) return 8;

   
// Test 15: Nested conditions with strings
    string<32> status <- "active";
    if (status = "active") {
        if (status.char_count = 6) {
            result <- 8;
        }
    }
    if (result != 8) return 9;

    return 0;
}
