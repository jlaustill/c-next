// test-coverage: 11-bitmap24
// test-execution
// Tests: 24-bit bitmap type
// 24-bit bitmap for RGB color
bitmap24 RGBColor {
    Red[8], // bits 0-7 (8 bits)
    Green[8], // bits 8-15 (8 bits)
    Blue[8] // bits 16-23 (8 bits)
}

// 24-bit bitmap for sensor status
bitmap24 SensorConfig {
    Enabled, // bit 0
    AutoCalibrate, // bit 1
    HighPrecision, // bit 2
    Reserved1[5], // bits 3-7
    SampleRate[8], // bits 8-15
    Threshold[8] // bits 16-23
}

RGBColor color <- 0;

SensorConfig sensor <- 0;

u32 main() {
   
// Test RGB color fields
    color.Red <- 255;
    color.Green <- 128;
    color.Blue <- 64;

    if (color.Red != 255) return 1;
    if (color.Green != 128) return 2;
    if (color.Blue != 64) return 3;

    // Modify single channel
    color.Red <- 0;
    if (color.Red != 0) return 4;
    if (color.Green != 128) return 5; // Unchanged
    if (color.Blue != 64) return 6; // Unchanged

   
// Test sensor config single-bit fields
    sensor.Enabled <- true;
    sensor.AutoCalibrate <- false;
    sensor.HighPrecision <- true;

    if (sensor.Enabled != true) return 7;
    if (sensor.AutoCalibrate != false) return 8;
    if (sensor.HighPrecision != true) return 9;

   
// Test sensor config multi-bit fields
    sensor.SampleRate <- 100;
    sensor.Threshold <- 50;

    if (sensor.SampleRate != 100) return 10;
    if (sensor.Threshold != 50) return 11;

   
// Test reading into variables
    u8 rate <- sensor.SampleRate;
    if (rate != 100) return 12;

    u8 thresh <- sensor.Threshold;
    if (thresh != 50) return 13;

   
// Test modifying multi-bit fields
    sensor.SampleRate <- 200;
    if (sensor.SampleRate != 200) return 14;
    if (sensor.Threshold != 50) return 15; // Unchanged

   
// Test max value for 8-bit field
    color.Red <- 255;
    color.Green <- 255;
    color.Blue <- 255;
    if (color.Red != 255) return 16;
    if (color.Green != 255) return 17;
    if (color.Blue != 255) return 18;

    return 0;
}
