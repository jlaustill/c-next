/**
 * Generated by C-Next Transpiler from: string-byte-to-u8-param.test.cnx
 * A safer C for embedded systems
 */

#include "string-byte-to-u8-param.test.hpp"

#include <stdint.h>
#include <string.h>

// test-execution
/* test-no-warnings */
// Regression test for Issue #246 - string<N> byte indexing to u8 parameters
// Verifies passing buf[0] to u8 parameter generates correct types
// (was generating char* instead of uint8_t*)
/* Scope: ByteProcessor */

uint32_t ByteProcessor_processByte(uint32_t crc, uint8_t byte) {
    return crc ^ byte;
}

uint32_t ByteProcessor_processBuffer(void) {
    char buf[5] = "ABCD";
    uint32_t crc = 0U;
    crc = ByteProcessor_processByte(crc, buf[0U]);
    crc = ByteProcessor_processByte(crc, buf[1U]);
    crc = ByteProcessor_processByte(crc, buf[2U]);
    crc = ByteProcessor_processByte(crc, buf[3U]);
    return crc;
}

int main(void) {
    uint32_t result = ByteProcessor_processBuffer();
    if (result != 0x04) return 1;
    return 0;
}
