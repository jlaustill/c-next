/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include "callback-pointer-scope.test.h"

// test-transpile-only
// Issue #895 Bug C: Callback functions INSIDE a scope
// Verifies that scope-based callbacks also generate correct pointer signatures
#include "widget.h"

#include <stdint.h>
#include <stdbool.h>

/* Scope: Renderer */

static void Renderer_my_flush(widget_t* w, const rect_t* area, uint8_t* buf) {
    widget_flush_was_called = true;
    widget_flush_area_x = area->x;
    widget_flush_buf_first_byte = (*buf);
}

void Renderer_init(void) {
    widget_t* w = widget_create();
    widget_set_flush_cb(w, Renderer_my_flush);
}
