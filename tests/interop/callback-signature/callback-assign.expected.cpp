/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

// test-cpp-only
// test-transpile-only
// Test: Assigning C-Next function to C callback typedef
// Current behavior: C-Next generates `const T&` but C callback expects `T`
// This test documents the current (incorrect) behavior
// TODO: Fix so C-Next functions can be assigned to C callbacks
#include "callback_types.h"

#include <stdint.h>

// C-Next function that should be assignable to PointCallback
void my_point_handler(const Point& p) {
    int32_t sum = p.x + p.y;
}

void test_callback_assign(void) {
    PointCallback cb = my_point_handler;
    PointHandler handler = (PointHandler){ .on_point = my_point_handler };
    register_callback(my_point_handler);
}
