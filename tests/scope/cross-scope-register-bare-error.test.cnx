// test-error
// Test: Bare register access from inside a scope should error when SHADOWED
// Issue #779: Ambiguity-aware validation - only require global. when shadowed

register GPIO @ 0x40000000 {
    DR:  u32 rw @ 0x00,
    DIR: u32 rw @ 0x04,
}

scope Motor {
    // Shadow the GPIO register name with a scope member
    u32 GPIO <- 0;

    void test() {
        // ERROR: GPIO is shadowed by scope member, must use global.GPIO.DR
        GPIO.DR <- 0x01;
    }
}

void main() {
}
