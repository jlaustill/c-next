/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include <stdint.h>

// test-execution
// Tests: Issue #268 - automatic const for unmodified pointer parameters
// Read-only parameter - should get const
void readOnly(uint32_t value) {
    uint32_t local = value;
}

// Modified parameter - should NOT get const
void modified(uint32_t* value) {
    (*value) = 42;
}

// Multiple params - mixed const/non-const
uint32_t mixedParams(uint32_t readVal, uint32_t* writeVal) {
    (*writeVal) = readVal + 10;
    return (*writeVal);
}

// Array parameter modification via index
void arrayMod(uint8_t arr[4]) {
    arr[0] = 99;
}

// Array parameter read-only
uint8_t arrayReadOnly(const uint8_t arr[4]) {
    return arr[0];
}

int main(void) {
    uint32_t x = 10;
    readOnly(x);
    if (x != 10) return 1;
    modified(&x);
    uint32_t a = 5;
    uint32_t b = 0;
    uint32_t result = mixedParams(a, &b);
    if (result != 15) return 2;
    uint8_t data[4] = {1, 2, 3, 4};
    arrayMod(data);
    if (data[0] != 99) return 3;
    uint8_t data2[4] = {10, 20, 30, 40};
    uint8_t val = arrayReadOnly(data2);
    if (val != 10) return 4;
    return 0;
}
