/* test-execution */
/* test-coverage: 30-use-c-struct-nested */
// Tests: Using C structs with nested struct members (Issue #196 fix)
// ADR-010: Nested struct member access from C headers

#include "c-interop/structs.h"

u32 main() {
    // Test 1: Use Rectangle with nested NamedPoint
    Rectangle rect;
    rect.origin.x <- 10;
    rect.origin.y <- 20;
    rect.width <- 100;
    rect.height <- 50;

    if (rect.origin.x != 10) return 1;
    if (rect.origin.y != 20) return 2;
    if (rect.width != 100) return 3;
    if (rect.height != 50) return 4;

    // Test 2: Access nested struct field sizes
    if (rect.origin.x.length != 32) return 5;
    if (rect.width.length != 32) return 6;

    // Test 3: Calculate area
    u32 area <- rect.width * rect.height;
    if (area != 5000) return 7;

    // Test 4: Copy nested struct values
    Rectangle rect2;
    rect2.origin.x <- rect.origin.x;
    rect2.origin.y <- rect.origin.y;
    rect2.width <- rect.width;
    rect2.height <- rect.height;

    if (rect2.origin.x != 10) return 8;
    if (rect2.height != 50) return 9;

    return 0;  // All tests passed
}
