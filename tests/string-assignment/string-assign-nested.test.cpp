/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include <stdint.h>
#include <string.h>

// ADR-044: Overflow helper functions
#include <limits.h>

static inline uint32_t cnx_clamp_add_u32(uint32_t a, uint64_t b) {
    if (b > (uint64_t)(UINT32_MAX - a)) return UINT32_MAX;
    uint32_t result;
    if (__builtin_add_overflow(a, (uint32_t)b, &result)) return UINT32_MAX;
    return result;
}

// test-execution
// Issue #139: Test string assignment in deeply nested blocks
char nested[33] = "";

void deepNest(uint32_t depth) {
    if (depth > 0) {
        if (depth > 1) {
            if (depth > 2) {
                strncpy(nested, "DeepNest", 32); nested[32] = '\0';
            }
        }
    }
}

void mixedNest(uint32_t count) {
    if (count > 0) {
        uint32_t i = 0U;
        while (i < count) {
            if (i == 0) {
                strncpy(nested, "Mixed", 32); nested[32] = '\0';
            }
            i = cnx_clamp_add_u32(i, 1U);
        }
    }
}

int main(void) {
    deepNest(3);
    if (strlen(nested) != 8) return 1;
    mixedNest(1);
    if (strlen(nested) != 5) return 2;
    {
        {
            {
                strncpy(nested, "Blocks", 32); nested[32] = '\0';
            }
        }
    }
    if (strlen(nested) != 6) return 3;
    return 0;
}
