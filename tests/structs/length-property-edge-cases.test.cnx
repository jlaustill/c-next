/* test-execution */ // Edge case tests for .length property on struct members
// Tests const parameters, all primitive types, and nested expressions
struct AllTypes {
    u8 field_u8;
    u16 field_u16;
    u32 field_u32;
    u64 field_u64;
    i8 field_i8;
    i16 field_i16;
    i32 field_i32;
    i64 field_i64;
    f32 field_f32;
    f64 field_f64;
}

// Test with const parameter
u32 testConst(const AllTypes data) {
    if (data.field_u32.length != 32) return 1;
    if (data.field_u16.length != 16) return 2;
    return 0;
}

// Test with regular parameter
u32 testParam(AllTypes data) {
    // Test all unsigned types
    if (data.field_u8.length != 8) return 10;
    if (data.field_u16.length != 16) return 11;
    if (data.field_u32.length != 32) return 12;
    if (data.field_u64.length != 64) return 13;

    // Test all signed types
    if (data.field_i8.length != 8) return 20;
    if (data.field_i16.length != 16) return 21;
    if (data.field_i32.length != 32) return 22;
    if (data.field_i64.length != 64) return 23;

    // Test floating point types
    if (data.field_f32.length != 32) return 30;
    if (data.field_f64.length != 64) return 31;

    return 0;
}

u32 main() {
    AllTypes data;
    data.field_u8 <- 1;
    data.field_u16 <- 2;
    data.field_u32 <- 3;
    data.field_u64 <- 4;
    data.field_i8 <- -1;
    data.field_i16 <- -2;
    data.field_i32 <- -3;
    data.field_i64 <- -4;
    data.field_f32 <- 1.5;
    data.field_f64 <- 2.5;

    // Test with const parameter
    u32 result <- testConst(data);
    if (result != 0) return result;

    // Test with regular parameter
    result <- testParam(data);
    if (result != 0) return result;

    // Test nested expression
    u32 totalBits <- data.field_u32.length + data.field_u16.length + data.field_u8.length;
    if (totalBits != 56) return 100; // 32 + 16 + 8 = 56

    // Test byte calculation in nested expression
    u32 totalBytes <- (data.field_u32.length + data.field_u16.length) / 8;
    if (totalBytes != 6) return 101; // (32 + 16) / 8 = 6

    // Test multiple field accesses in sequence
    u32 len1 <- data.field_u32.length;
    u32 len2 <- data.field_u16.length;
    u32 len3 <- data.field_u8.length;
    if (len1 != 32) return 110;
    if (len2 != 16) return 111;
    if (len3 != 8) return 112;

    return 0; // All tests passed
}
