// test-error
// crc32.cnx - This pattern requires runtime offsets which are now compile-time errors
// Issue #234: Slice assignment requires compile-time constant offsets for safety
//
// This example demonstrates the OLD pattern that used runtime offsets.
// For real-world serialization, consider:
// 1. Using fixed compile-time offsets when layout is known
// 2. Using a serialization helper/library
// 3. Using raw memcpy with explicit bounds documentation

#include "AppConfig.h"

u32 calculateChecksum(const AppConfig config) {
    string<512> buffer <- "";
    u32 offset <- 0;
    u8 length <- 0;

    // This line will fail at compile time because offset is a runtime variable
    length <- config.magic.length / 8;
    buffer[offset, length] <- config.magic;

    return 0;
}
