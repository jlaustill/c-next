/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include "cross-scope-register-bare-ok.test.h"

#include <stdint.h>

// Test: Bare register access from inside a scope should work when NOT shadowed
// Issue #779: Ambiguity-aware validation - only require global. when shadowed
// This is the happy path companion to cross-scope-register-bare-error.test.cnx
/* Register: GPIO @ 0x40000000 */
#define GPIO_DR (*(volatile uint32_t*)(0x40000000 + 0x00))
#define GPIO_DIR (*(volatile uint32_t*)(0x40000000 + 0x04))

/* Scope: Motor */
static uint32_t Motor_speed = 0;

void Motor_configure(void) {
    GPIO_DR = 0x01;
    GPIO_DIR = 0xFF;
}

int main(void) {
    Motor_configure();
}
