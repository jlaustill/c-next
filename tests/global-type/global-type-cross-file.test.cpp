/**
 * Generated by C-Next Transpiler from: global-type-cross-file.test.cnx
 * A safer C for embedded systems
 */

#include "global-type-cross-file.test.hpp"

// test-execution
// Tests: global.Type for cross-file type references (the actual bug scenario from #478)
// The enum and struct are defined in cross-file-types.cnx
#include <cross-file-types.hpp>

#include <stdint.h>

/* Scope: TaskManager */

EPriority TaskManager_getPriority(void) {
    return EPriority_HIGH;
}

int32_t TaskManager_priorityToInt(EPriority p) {
    return static_cast<int32_t>(p);
}

Vec2 TaskManager_getPosition(void) {
    Vec2 pos = (Vec2){ .x = 100, .y = 200 };
    return pos;
}

int32_t TaskManager_sumVec(const Vec2& v) {
    return v.x + v.y;
}

int main(void) {
    EPriority priority = EPriority_HIGH;
    if (static_cast<int32_t>(priority) != 2) return 1;
    int32_t pval = TaskManager_priorityToInt(EPriority_MEDIUM);
    if (pval != 1) return 2;
    Vec2 pos = TaskManager_getPosition();
    if (pos.x != 100) return 3;
    if (pos.y != 200) return 4;
    Vec2 v = (Vec2){ .x = 15, .y = 25 };
    int32_t total = TaskManager_sumVec(v);
    if (total != 40) return 5;
    return 0;
}
