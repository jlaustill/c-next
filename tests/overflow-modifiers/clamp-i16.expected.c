/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include <stdint.h>

// ADR-044: Overflow helper functions
#include <limits.h>

static inline int16_t cnx_clamp_add_i16(int16_t a, int32_t b) {
    int32_t result = (int32_t)a + b;
    if (result > INT16_MAX) return INT16_MAX;
    if (result < INT16_MIN) return INT16_MIN;
    return (int16_t)result;
}

static inline int16_t cnx_clamp_sub_i16(int16_t a, int32_t b) {
    int32_t result = (int32_t)a - b;
    if (result > INT16_MAX) return INT16_MAX;
    if (result < INT16_MIN) return INT16_MIN;
    return (int16_t)result;
}

/* test-execution */
// Tests: clamp modifier for i16 type (-32768 to 32767)
// Validates overflow clamps to 32767, underflow clamps to -32768
// ADR-044: Per-variable overflow semantics
uint32_t main(void) {
    int16_t val = 30000;
    val = cnx_clamp_add_i16(val, 5000);
    if (val != 32767) return 1;
    val = 32767;
    val = cnx_clamp_add_i16(val, 1);
    if (val != 32767) return 2;
    val = 20000;
    val = cnx_clamp_add_i16(val, 20000);
    if (val != 32767) return 3;
    val = 1;
    val = cnx_clamp_add_i16(val, 32767);
    if (val != 32767) return 4;
    val = 32000;
    val = cnx_clamp_add_i16(val, 1000);
    if (val != 32767) return 5;
    val = cnx_clamp_add_i16(val, 1000);
    if (val != 32767) return 6;
    val = -30000;
    val = cnx_clamp_sub_i16(val, 5000);
    if (val != -32768) return 7;
    val = -32768;
    val = cnx_clamp_sub_i16(val, 1);
    if (val != -32768) return 8;
    val = -20000;
    val = cnx_clamp_sub_i16(val, 20000);
    if (val != -32768) return 9;
    val = -32000;
    val = cnx_clamp_sub_i16(val, 1000);
    if (val != -32768) return 10;
    val = cnx_clamp_sub_i16(val, 1000);
    if (val != -32768) return 11;
    val = 1000;
    val = cnx_clamp_sub_i16(val, 5000);
    if (val != -4000) return 12;
    val = -1000;
    val = cnx_clamp_add_i16(val, 5000);
    if (val != 4000) return 13;
    val = 20000;
    val = cnx_clamp_add_i16(val, 20000);
    if (val != 32767) return 14;
    val = -20000;
    val = cnx_clamp_sub_i16(val, 20000);
    if (val != -32768) return 15;
    val = 10000;
    val = cnx_clamp_add_i16(val, 10000);
    if (val != 20000) return 16;
    val = -10000;
    val = cnx_clamp_sub_i16(val, 10000);
    if (val != -20000) return 17;
    val = 0;
    val = cnx_clamp_add_i16(val, 16384);
    if (val != 16384) return 18;
    val = 5000;
    val = cnx_clamp_sub_i16(val, 5000);
    if (val != 0) return 19;
    val = 32766;
    val = cnx_clamp_add_i16(val, 1);
    if (val != 32767) return 20;
    val = -32767;
    val = cnx_clamp_sub_i16(val, 1);
    if (val != -32768) return 21;
    val = 16384;
    val = cnx_clamp_add_i16(val, 0);
    if (val != 16384) return 22;
    val = -16384;
    val = cnx_clamp_sub_i16(val, 0);
    if (val != -16384) return 23;
    val = 30000;
    val = cnx_clamp_add_i16(val, 5000);
    if (val != 32767) return 24;
    val = cnx_clamp_sub_i16(val, 32767);
    if (val != 0) return 25;
    val = cnx_clamp_sub_i16(val, 32767);
    if (val != -32767) return 26;
    val = cnx_clamp_sub_i16(val, 32767);
    if (val != -32768) return 27;
    return 0;
}
