// ADR-017: Scoped Enum Test
// Tests enums declared inside scopes with proper prefixing
const u8 defaultValue <- 3;

scope Motor {
    public enum State {
        IDLE,
        RUNNING,
        STALLED
    }
    const u8 defaultValue <- 1;
    public this.State current <- this.State.IDLE; // This is a default value
    public u8 start() {
        this.current <- this.State.RUNNING;

        return this.defaultValue;
    }
    public u8 stop() {
        this.current <- this.State.IDLE;

        return global.defaultValue;
    }
    public bool isRunning() {
        const this.State currentState <- this.current;
        if (currentState = this.State.RUNNING) {
            return true;
        }
        return false;
    }
}

// Usage from outside the scope
Motor.State externalState <- Motor.State.IDLE;

void main() {
    Motor.start();

    if (Motor.current = Motor.State.RUNNING) {
        externalState <- Motor.State.STALLED;
    }
}
