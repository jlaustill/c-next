// Tests: Array dimensions using constants should be preserved in extern declarations
// This reproduces issue #455

const u8 DEVICE_COUNT <- 4;
const u8 CHANNEL_COUNT <- 2;

struct TReading {
    i16 value;
    bool valid;
}

// Single dimension with constant - should generate: extern bool enabled[4];
bool enabled[DEVICE_COUNT] <- [false, false, false, false];

// Multi-dimensional with constants - should generate: extern TReading readings[4][4];
TReading readings[DEVICE_COUNT][4];

// Mixed: constant first, literal second - should generate: extern i32 mixed[4][8];
i32 mixed[DEVICE_COUNT][8];

// Mixed: literal first, constant second - should generate: extern i32 mixed2[8][4];
i32 mixed2[8][DEVICE_COUNT];

// Both dimensions constant - should generate: extern u16 both[4][2];
u16 both[DEVICE_COUNT][CHANNEL_COUNT];

// Literal dimension (control case - should already work)
bool literal_arr[4];

scope Manager {
    public void test() {
        global.enabled[0] <- true;
    }
}

void main() {
    Manager.test();
}
