// test-execution
// Tests: Multi-dimensional array parameters
// Coverage: 2D array parameters passed to functions

// All dimensions must be specified for memory safety
void write2D(u32[2][3] arr, u32 row, u32 col, u32 value) {
    arr[row][col] <- value;
}

u32 read2D(u32[2][3] arr, u32 row, u32 col) {
    return arr[row][col];
}

void fillRow(u32[2][3] arr, u32 row, u32 val0, u32 val1, u32 val2) {
    arr[row][0] <- val0;
    arr[row][1] <- val1;
    arr[row][2] <- val2;
}

u32 sumRow(u32[2][3] arr, u32 row) {
    return arr[row][0] + arr[row][1] + arr[row][2];
}

u32 main() {
    u32[2][3] matrix;

    // Initialize all elements
    matrix[0][0] <- 0;
    matrix[0][1] <- 0;
    matrix[0][2] <- 0;
    matrix[1][0] <- 0;
    matrix[1][1] <- 0;
    matrix[1][2] <- 0;

    // Test single element write
    write2D(matrix, 0, 0, 100);
    if (matrix[0][0] != 100) return 1;

    write2D(matrix, 1, 2, 999);
    if (matrix[1][2] != 999) return 2;

    // Test read through parameter
    u32 result <- read2D(matrix, 0, 0);
    if (result != 100) return 3;

    result <- read2D(matrix, 1, 2);
    if (result != 999) return 4;

    // Test fill row
    fillRow(matrix, 0, 10, 20, 30);
    if (matrix[0][0] != 10) return 5;
    if (matrix[0][1] != 20) return 6;
    if (matrix[0][2] != 30) return 7;

    // Test sum row
    result <- sumRow(matrix, 0);
    if (result != 60) return 8;

    fillRow(matrix, 1, 100, 200, 300);
    result <- sumRow(matrix, 1);
    if (result != 600) return 9;

    // Verify first row unchanged
    result <- sumRow(matrix, 0);
    if (result != 60) return 10;

    return 0;
}
