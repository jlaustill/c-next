// Test that bracket indexing on bitmap types is rejected
// Should error: Cannot use bracket indexing on bitmap type
#pragma target stm32f4

scope Timer {
    bitmap32 ControlBits {
        ENABLE, // bit 0
        TICKINT, // bit 1
        CLKSOURCE, // bit 2
        Reserved_3, // bit 3
        Reserved_4, // bit 4
        Reserved_5, // bit 5
        Reserved_6, // bit 6
        Reserved_7, // bit 7
        Reserved_8, // bit 8
        Reserved_9, // bit 9
        Reserved_10, // bit 10
        Reserved_11, // bit 11
        Reserved_12, // bit 12
        Reserved_13, // bit 13
        Reserved_14, // bit 14
        Reserved_15, // bit 15
        COUNTFLAG, // bit 16
        Reserved_17, // bit 17
        Reserved_18, // bit 18
        Reserved_19, // bit 19
        Reserved_20, // bit 20
        Reserved_21, // bit 21
        Reserved_22, // bit 22
        Reserved_23, // bit 23
        Reserved_24, // bit 24
        Reserved_25, // bit 25
        Reserved_26, // bit 26
        Reserved_27, // bit 27
        Reserved_28, // bit 28
        Reserved_29, // bit 29
        Reserved_30, // bit 30
        Reserved_31 // bit 31
    }
    register SysTick @ 0xE000E010 {
        CTRL: ControlBits rw @ 0x00,
    }
    public void test() {
        // This should error - using bracket indexing instead of field name in read
        bool enabled <- this.SysTick.CTRL[0];
    }
}
