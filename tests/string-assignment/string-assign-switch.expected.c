/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include <stdint.h>
#include <string.h>

/* test-execution */
// Issue #139: Test string assignment inside switch cases
char level[33] = "";

void setLevel(uint32_t* code) {
    switch ((*code)) {
        case 0: {
            strncpy(level, "Low", 32); level[32] = '\0';
            break;
        }
        case 1: {
            strncpy(level, "Medium", 32); level[32] = '\0';
            break;
        }
        case 2: {
            strncpy(level, "High", 32); level[32] = '\0';
            break;
        }
        default: {
            strncpy(level, "Unknown", 32); level[32] = '\0';
            break;
        }
    }
}

int main(void) {
    setLevel(&(uint32_t){0});
    if (strlen(level) != 3) return 1;
    setLevel(&(uint32_t){1});
    if (strlen(level) != 6) return 2;
    setLevel(&(uint32_t){2});
    if (strlen(level) != 4) return 3;
    setLevel(&(uint32_t){99});
    if (strlen(level) != 7) return 4;
    return 0;
}
