/* test-execution */
// Test: ADR-016 public and private visibility modifiers on scope members and methods
// Verifies public members are accessible from outside scope and private are only internal

scope Visibility {
    // Private variables (default - no modifier)
    u8 privateCounter <- 0;
    bool privateFlag <- false;

    // Public variables (explicit public modifier)
    public u8 publicCounter <- 10;
    public bool publicFlag <- true;

    // Private method (default - no modifier)
    u8 getPrivateCounterInternal() {
        return this.privateCounter;
    }

    // Private method that modifies private state
    void incrementPrivateCounter() {
        this.privateCounter <- this.privateCounter + 1;
    }

    // Private method that uses private flag
    bool checkPrivateFlag() {
        return this.privateFlag;
    }

    // Public method that accesses private members
    public u8 getPrivateCounter() {
        return this.privateCounter;
    }

    // Public method that calls private method
    public u8 getPrivateCounterViaInternal() {
        return this.getPrivateCounterInternal();
    }

    // Public method that accesses public members
    public u8 getPublicCounter() {
        return this.publicCounter;
    }

    // Public method that modifies public state
    public void setPublicCounter(u8 value) {
        this.publicCounter <- value;
    }

    // Public method that modifies private state (encapsulation)
    public void incrementPrivate() {
        this.incrementPrivateCounter();
    }

    // Public method that tests both private and public members
    public u8 getSum() {
        return this.privateCounter + this.publicCounter;
    }

    // Public method that uses private and public flags
    public bool getBothFlags() {
        return this.privateFlag && this.publicFlag;
    }

    // Public setter for private flag (encapsulation)
    public void setPrivateFlag(bool value) {
        this.privateFlag <- value;
    }

    // Public setter for public flag
    public void setPublicFlag(bool value) {
        this.publicFlag <- value;
    }

    // Public method to set private counter
    public void setPrivateCounter(u8 value) {
        this.privateCounter <- value;
    }
}

u32 main() {
    // Test 1-2: Read public variables directly
    if (Visibility.publicCounter != 10) return 1;
    if (Visibility.publicFlag != true) return 2;

    // Test 3-4: Access private variables via public getter methods (encapsulation)
    if (Visibility.getPrivateCounter() != 0) return 3;
    if (Visibility.getPrivateCounterViaInternal() != 0) return 4;

    // Test 5: Access public variables via public methods
    if (Visibility.getPublicCounter() != 10) return 5;

    // Test 6: Modify public state directly
    Visibility.publicCounter <- 20;
    if (Visibility.publicCounter != 20) return 6;

    // Test 7: Modify public state via public methods
    Visibility.setPublicCounter(30);
    if (Visibility.getPublicCounter() != 30) return 7;

    // Test 8: Modify private state via public methods (encapsulation)
    Visibility.incrementPrivate();
    if (Visibility.getPrivateCounter() != 1) return 8;

    // Test 9: Test getSum combines private and public
    // private = 1, public = 30, sum = 31
    if (Visibility.getSum() != 31) return 9;

    // Test 10: Set private flag via public method
    Visibility.setPrivateFlag(true);
    // private flag is now true, public flag was set to default true
    // both true -> should return true
    if (Visibility.getBothFlags() != true) return 10;

    // Test 11: Set public flag via public method
    Visibility.setPublicFlag(false);
    // now private=true, public=false -> AND = false
    if (Visibility.getBothFlags() != false) return 11;

    // Test 12: Set private counter directly via public setter
    Visibility.setPrivateCounter(100);
    if (Visibility.getPrivateCounter() != 100) return 12;

    // All 12 validations passed
    return 0;
}
