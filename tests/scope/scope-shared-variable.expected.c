/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include <stdint.h>

// test-execution
// Tests: Scope variables persist like C static variables (Issue #233)
//
// Scope variables are initialized once at program start and persist
// across all function calls, just like C static variables.
/* Scope: SharedState */
static uint32_t SharedState_counter = 0;

void SharedState_increment(void) {
    SharedState_counter = SharedState_counter + 1;
}

uint32_t SharedState_getCount(void) {
    return SharedState_counter;
}

int main(void) {
    if (SharedState_getCount() != 0) return 1;
    SharedState_increment();
    if (SharedState_getCount() != 1) return 2;
    SharedState_increment();
    if (SharedState_getCount() != 2) return 3;
    SharedState_increment();
    if (SharedState_getCount() != 3) return 4;
    return 0;
}
