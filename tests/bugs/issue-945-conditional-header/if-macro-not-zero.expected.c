/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

// test-transpile-only
// Issue #945: Transpiler preprocessor doesn't evaluate #if MACRO != 0
//
// When a C header guards functions with #if MACRO != 0, the transpiler
// should evaluate the condition using defines from included config headers.
//
// The conditional_features.h includes feature_conf.h which defines:
//   #define FEATURE_LABEL 1
//
// Therefore create_label() should be visible to the transpiler.
// Currently fails: The transpiler doesn't evaluate the #if FEATURE_LABEL != 0 condition.
#include "conditional_features.h"

#include <stdint.h>

void test(void) {
    uint32_t x = always_available();
    widget_t* label = create_label(null);
}
