/**
 * Generated by C-Next Transpiler from: issue-296-forward-decl.test.cnx
 * A safer C for embedded systems
 */

#include "issue-296-forward-decl.test.h"

// Issue #296: Forward declaration incompatible with typedef struct pattern
// Tests: Cross-file struct usage with public functions
// When a public function uses a struct from another file, the header
// generator creates forward declarations that must be compatible with
// the struct definition.
#include <issue-296-types.h>

#include <stdint.h>

/* Scope: DataHandler */
static AppData DataHandler_storedData = {0};

void DataHandler_initialize(const AppData* data) {
    DataHandler_storedData = (*data);
}

AppData DataHandler_getData(void) {
    return DataHandler_storedData;
}

int main(void) {
    AppData input = (AppData){ .humidity = 65.5, .temperature = 22.3 };
    DataHandler_initialize(&input);
    AppData output = DataHandler_getData();
    if (output.humidity != 65.5) return 1;
    if (output.temperature != 22.3) return 2;
    return 0;
}
