/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

// test-execution
// Issue #465: Enum values from external files should get type prefix
// Tests that PRESSURE_TYPE_PSIG from types.cnx becomes EPressureType_PRESSURE_TYPE_PSIG
#include "types.hpp"

#include <stdint.h>

typedef struct Config {
    EPressureType pType;
} Config;

void setDefault(Config& config) {
    config.pType = EPressureType_PRESSURE_TYPE_PSIG;
}

void setExplicit(Config& config) {
    config.pType = EPressureType_PRESSURE_TYPE_PSIA;
}

int main(void) {
    Config cfg = (Config){ .pType = EPressureType_PRESSURE_TYPE_PSIA };
    if (cfg.pType != EPressureType_PRESSURE_TYPE_PSIA) return 1;
    setDefault(cfg);
    if (cfg.pType != EPressureType_PRESSURE_TYPE_PSIG) return 2;
    setExplicit(cfg);
    if (cfg.pType != EPressureType_PRESSURE_TYPE_PSIA) return 3;
    return 0;
}
