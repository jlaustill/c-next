/* test-no-warnings */
// test-execution
// Tests: Struct pass-by-reference should not trigger pointer warnings
// Validates: Implicit pointer handling is warning-free
// Coverage: Struct parameters, struct returns, nested access

struct Data {
    u32 value;
    u8 flags;
}

struct Container {
    Data inner;
    u32 count;
}

void modifyData(Data d) {
    d.value <- 999;
    d.flags <- 0xFF;
}

Data createData(u32 val, u8 flg) {
    Data result <- {value: val, flags: flg};
    return result;
}

void updateContainer(Container c, u32 newCount) {
    c.count <- newCount;
    c.inner.value <- newCount * 10;
}

u32 main() {
    // Test struct parameter passing
    Data d <- {value: 100, flags: 0x0F};
    modifyData(d);
    if (d.value != 999) return 1;
    if (d.flags != 0xFF) return 2;

    // Test struct return
    Data created <- createData(42, 0xAB);
    if (created.value != 42) return 3;
    if (created.flags != 0xAB) return 4;

    // Test nested struct access
    Container c <- {inner: {value: 0, flags: 0}, count: 0};
    updateContainer(c, 5);
    if (c.count != 5) return 5;
    if (c.inner.value != 50) return 6;

    return 0;
}
