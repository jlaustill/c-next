/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include <stdint.h>

// ADR-029: Test callback assignment
typedef struct {
    uint32_t id;
} Message;

void onReceive(const Message* msg) {
}

typedef void (*onReceive_fp)(const Message*);

// User's custom handler (same signature, not used as a type)
void myHandler(const Message* msg) {
}

typedef struct {
    onReceive_fp _handler;
} Controller;

Controller Controller_init(void) {
    return (Controller){
        ._handler = onReceive
    };
}

void test(void) {
    Controller c = {0};
    c._handler = myHandler;
}
