/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

// Issue #314: global.X.method() generates wrong C++ syntax for undeclared classes
// Tests: C++ scope resolution for both declared and undeclared external classes
// Bug: global.UndeclaredClass.method() generates "UndeclaredClass.method()" (dot)
//      but should generate "UndeclaredClass::method()" (scope resolution)
#include "issue-314-global-method-call.hpp"

#include <stdint.h>

// ============================================================================
// SECTION 1: DECLARED CLASSES (regression protection - already works)
// ============================================================================
void testDeclaredClasses(void) {
    DeclaredClass::init();
    int32_t val = DeclaredClass::getValue();
    DeclaredNS::setup();
    int32_t readVal = DeclaredNS::read();
}

// ============================================================================
// SECTION 2: UNDECLARED EXTERNAL CLASSES (Issue #314 - the bug)
// ============================================================================
// These classes are NOT declared in the header but exist externally
// (like Arduino's Serial, Wire, SPI classes)
// In C++ mode, global.X.method() should ALWAYS use :: syntax
void testUndeclaredExternalClasses(void) {
    Serial::begin(9600);
    Serial::println("Hello");
    Wire::begin();
    Wire::beginTransmission(0x50);
    SPI::begin();
    SPI::transfer(0xFFU);
    ExternalLib::initialize();
    int32_t result = ExternalLib::compute(42);
}

// ============================================================================
// SECTION 3: MIXED USAGE (declared and undeclared in same function)
// ============================================================================
void testMixedUsage(void) {
    DeclaredClass::init();
    Serial::begin(115200);
    DeclaredNS::setup();
    ExternalSensor::calibrate();
}

// ============================================================================
// MAIN
// ============================================================================
int main(void) {
    testDeclaredClasses();
    testUndeclaredExternalClasses();
    testMixedUsage();
}
