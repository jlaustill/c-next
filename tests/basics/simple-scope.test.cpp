/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include "simple-scope.test.hpp"

#include <stdint.h>

// test-execution
// Tests: Basic scope (module) definition
// Demonstrates: scope keyword, public functions, state encapsulation
// Simple counter scope
/* Scope: Counter */
static uint32_t Counter_value = 0;

void Counter_reset(void) {
    Counter_value = 0U;
}

void Counter_increment(void) {
    Counter_value = Counter_value + 1U;
}

void Counter_add(uint32_t amount) {
    Counter_value = Counter_value + amount;
}

uint32_t Counter_get(void) {
    return Counter_value;
}

// Scope with initialization
/* Scope: Temperature */
static int32_t Temperature_celsius = 0;

void Temperature_set(int32_t temp) {
    Temperature_celsius = temp;
}

int32_t Temperature_getCelsius(void) {
    return Temperature_celsius;
}

int32_t Temperature_getFahrenheit(void) {
    return (Temperature_celsius * 9 / 5) + 32;
}

int main(void) {
    Counter_reset();
    uint32_t val = Counter_get();
    if (val != 0) return 1;
    Counter_increment();
    val = Counter_get();
    if (val != 1) return 2;
    Counter_increment();
    Counter_increment();
    val = Counter_get();
    if (val != 3) return 3;
    Counter_add(10);
    val = Counter_get();
    if (val != 13) return 4;
    Counter_reset();
    val = Counter_get();
    if (val != 0) return 5;
    Temperature_set(25);
    int32_t celsius = Temperature_getCelsius();
    if (celsius != 25) return 6;
    int32_t fahrenheit = Temperature_getFahrenheit();
    if (fahrenheit != 77) return 7;
    Temperature_set(0);
    fahrenheit = Temperature_getFahrenheit();
    if (fahrenheit != 32) return 8;
    return 0;
}
