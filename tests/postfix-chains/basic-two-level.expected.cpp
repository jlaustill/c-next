/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include <stdint.h>
#include <stdbool.h>

// Postfix Chain Test: Basic 2-level chains
// Tests: struct.member, array[index], register.field combinations
typedef struct Point {
    int32_t x;
    int32_t y;
} Point;

typedef struct Line {
    Point start;
    Point end;
} Line;

/* Register: GPIO @ 0x40000000 */
#define GPIO_DR (*(volatile uint32_t*)(0x40000000 + 0x00))
#define GPIO_DR_SET (*(volatile uint32_t*)(0x40000000 + 0x84))

Point points[4] = {0};

Line lines[2] = {0};

int main(void) {
    lines[0].start.x = 10;
    lines[0].start.y = 20;
    lines[0].end.x = 30;
    lines[0].end.y = 40;
    int32_t x1 = lines[0U].start.x;
    int32_t y1 = lines[0U].start.y;
    points[0].x = 5;
    points[0].y = 15;
    int32_t px = points[0U].x;
    GPIO_DR = (GPIO_DR & ~(1U << 3)) | (1U << 3);
    bool bit = ((((GPIO_DR >> 5U) & 1)) != 0U);
    GPIO_DR_SET = (1U << 7);
}
