// test-error
// crc32.cnx - This pattern requires runtime offsets which are now compile-time errors
// Issue #234: Slice assignment requires compile-time constant offsets for safety
// Issue #272: Confirmed as intentional design - compile-time safety over runtime flexibility
//
// This example demonstrates a pattern that requires runtime offsets.
// For real-world serialization, consider:
// 1. Using fixed compile-time offsets when layout is known (see ADR-007)
// 2. Using explicit memcpy with manual bounds checking
// 3. Using a serialization helper/library

#include "AppConfig.h"

u32 calculateChecksum(const AppConfig config) {
    string<512> buffer <- "";
    u32 offset <- 0;
    u8 length <- 0;

    // This line will fail at compile time because offset is a runtime variable
    length <- config.magic.length / 8;
    buffer[offset, length] <- config.magic;

    return 0;
}
