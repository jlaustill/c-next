/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include "defs.h"

#include "widget.h"

#include <stdint.h>

// ==========================================================================
// FILE A: Callback DEFINITIONS + self-registration tests
//
// Defines 3 callbacks:
//   A_G:  Global function
//   A_SP: Scope public method  (in ScopeAP)
//   A_SV: Scope private method (in ScopeAV)
//
// Also tests registration FROM this file for each callback.
// ==========================================================================
// --- A_G: Global callback in file A ---
void a_global_cb(widget_t* w, const rect_t* area, uint8_t* buf) {
    widget_flush_ready(&(*w));
}

// --- A_SP: Scope public callback in file A ---
/* Scope: ScopeAP */

void ScopeAP_cb(widget_t w, const rect_t* area, uint8_t buf) {
    widget_flush_ready(&w);
}

// --- A_SV: Scope private callback in file A ---
/* Scope: ScopeAV */

static void ScopeAV_cb(widget_t w, const rect_t* area, uint8_t buf) {
    widget_flush_ready(&w);
}

void ScopeAV_reg_from_public(void) {
    widget_t w = widget_create();
    widget_set_flush_cb(&w, ScopeAV_cb);
}

static void ScopeAV_reg_from_private_helper(void) {
    widget_t w = widget_create();
    widget_set_flush_cb(&w, ScopeAV_cb);
}

void ScopeAV_reg_from_private(void) {
    ScopeAV_reg_from_private_helper();
}

// --- A_G registered from same-file global function ---
void a_reg_global_from_global(void) {
    widget_t w = widget_create();
    widget_set_flush_cb(&w, a_global_cb);
}

// --- A_G registered from same-file scope public method ---
/* Scope: RegAGPub */

void RegAGPub_register_it(void) {
    widget_t w = widget_create();
    widget_set_flush_cb(&w, a_global_cb);
}

// --- A_G registered from same-file scope private method ---
/* Scope: RegAGPriv */

static void RegAGPriv_helper(void) {
    widget_t w = widget_create();
    widget_set_flush_cb(&w, a_global_cb);
}

void RegAGPriv_register_it(void) {
    RegAGPriv_helper();
}

// --- A_SP registered from same-file global function ---
void a_reg_sp_from_global(void) {
    widget_t w = widget_create();
    widget_set_flush_cb(&w, ScopeAP_cb);
}

// --- A_SP registered from same-file same-scope public method ---
/* Scope: ScopeAPSelf */

void ScopeAPSelf_cb(widget_t w, const rect_t* area, uint8_t buf) {
    widget_flush_ready(&w);
}

void ScopeAPSelf_reg_from_public(void) {
    widget_t w = widget_create();
    widget_set_flush_cb(&w, ScopeAPSelf_cb);
}

static void ScopeAPSelf_reg_from_private_helper(void) {
    widget_t w = widget_create();
    widget_set_flush_cb(&w, ScopeAPSelf_cb);
}

void ScopeAPSelf_reg_from_private(void) {
    ScopeAPSelf_reg_from_private_helper();
}

// --- A_SP registered from same-file different-scope public method ---
/* Scope: RegASPDiffPub */

void RegASPDiffPub_register_it(void) {
    widget_t w = widget_create();
    widget_set_flush_cb(&w, ScopeAP_cb);
}

// --- A_SP registered from same-file different-scope private method ---
/* Scope: RegASPDiffPriv */

static void RegASPDiffPriv_helper(void) {
    widget_t w = widget_create();
    widget_set_flush_cb(&w, ScopeAP_cb);
}

void RegASPDiffPriv_register_it(void) {
    RegASPDiffPriv_helper();
}
