/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include <stdint.h>
#include <stdbool.h>

// test-execution
// Tests: Bitmap field access on array elements
// Validates that arr[i].field generates correct RMW bit manipulation
// Issue #201: Bitmap array element field access generates invalid C
/* Bitmap: StatusFlags */
/* Fields:
 *   active: bit 0 (1 bit)
 *   ready: bit 1 (1 bit)
 *   error: bit 2 (1 bit)
 *   mode: bits 3-5 (3 bits)
 *   priority: bits 6-7 (2 bits)
 */
typedef uint8_t StatusFlags;

int main(void) {
    StatusFlags arr[4] = {0};
    arr[0] = (arr[0] & ~(1U << 0)) | (1U << 0);
    if (((arr[0U] >> 0) & 1) != true) return 1;
    if (arr[0U] != 1) return 2;
    arr[0] = (arr[0] & ~(1U << 1)) | (1U << 1);
    if (((arr[0U] >> 1) & 1) != true) return 3;
    if (arr[0U] != 3) return 4;
    arr[1] = (arr[1] & ~(0x7U << 3)) | ((5 & 0x7U) << 3);
    if (((arr[1U] >> 3) & 0x7) != 5) return 5;
    if (arr[1U] != 40) return 6;
    arr[2] = (arr[2] & ~(0x3U << 6)) | ((3 & 0x3U) << 6);
    if (((arr[2U] >> 6) & 0x3) != 3) return 7;
    if (arr[2U] != 192) return 8;
    arr[3] = (arr[3] & ~(1U << 0)) | (1U << 0);
    arr[3] = (arr[3] & ~(0x7U << 3)) | ((7 & 0x7U) << 3);
    arr[3] = (arr[3] & ~(0x3U << 6)) | ((2 & 0x3U) << 6);
    if (((arr[3U] >> 0) & 1) != true) return 9;
    if (((arr[3U] >> 3) & 0x7) != 7) return 10;
    if (((arr[3U] >> 6) & 0x3) != 2) return 11;
    if (arr[3U] != 185) return 12;
    arr[0] = (arr[0] & ~(1U << 0)) | (0U << 0);
    if (((arr[0U] >> 0) & 1) != false) return 13;
    if (arr[0U] != 2) return 14;
    uint8_t idx = 1U;
    arr[idx] = (arr[idx] & ~(1U << 2)) | (1U << 2);
    if (((arr[idx] >> 2) & 1) != true) return 15;
    if (arr[1U] != 44) return 16;
    return 0;
}
