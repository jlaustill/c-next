// ADR-046: Valid c_ prefix reassignment pattern
// Tests that c_ prefixed variables can be reassigned (e.g., in while loops).
// After reassignment, a new NULL check is required (stricter E0908 behavior).
#include <string.h>
#include <stdio.h>

string<64> haystack <- "hello world";

void testReassignment() {
    // First assignment - use cstring for C pointer returns
    cstring c_found <- strstr(haystack, "hello");
    if (c_found != NULL) {
        printf("Found: %s\n", c_found);  // OK - checked
    }

    // Re-assignment is allowed for c_ prefixed variables
    c_found <- strstr(haystack, "world");

    // Reassignment resets NULL-check state - new value could be NULL
    // Must check again before use
    if (c_found != NULL) {
        printf("Found: %s\n", c_found);  // OK - checked after reassignment
    }
}
