/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

// Test: ADR-016 + ADR-044 Clamp overflow modifier inside scopes
// Verifies that clamp modifier works correctly with integer types inside scope methods
// Tests: clamp variables accessed via this. accessor with compound assignment operators

#include <stdint.h>

// ADR-044: Overflow helper functions
#include <limits.h>

static inline uint8_t cnx_clamp_add_u8(uint8_t a, uint8_t b) {
    if (a > UINT8_MAX - b) return UINT8_MAX;
    return a + b;
}

static inline uint8_t cnx_clamp_sub_u8(uint8_t a, uint8_t b) {
    if (a < b) return 0;
    return a - b;
}

static inline uint16_t cnx_clamp_add_u16(uint16_t a, uint16_t b) {
    if (a > UINT16_MAX - b) return UINT16_MAX;
    return a + b;
}

static inline uint16_t cnx_clamp_sub_u16(uint16_t a, uint16_t b) {
    if (a < b) return 0;
    return a - b;
}

static inline uint32_t cnx_clamp_add_u32(uint32_t a, uint32_t b) {
    if (a > UINT32_MAX - b) return UINT32_MAX;
    return a + b;
}

static inline uint32_t cnx_clamp_sub_u32(uint32_t a, uint32_t b) {
    if (a < b) return 0;
    return a - b;
}

static inline int8_t cnx_clamp_add_i8(int8_t a, int8_t b) {
    if (b > 0 && a > INT8_MAX - b) return INT8_MAX;
    if (b < 0 && a < INT8_MIN - b) return INT8_MIN;
    return a + b;
}

static inline int8_t cnx_clamp_sub_i8(int8_t a, int8_t b) {
    if (b > 0 && a < INT8_MIN + b) return INT8_MIN;
    if (b < 0 && a > INT8_MAX + b) return INT8_MAX;
    return a - b;
}

static inline int16_t cnx_clamp_add_i16(int16_t a, int16_t b) {
    if (b > 0 && a > INT16_MAX - b) return INT16_MAX;
    if (b < 0 && a < INT16_MIN - b) return INT16_MIN;
    return a + b;
}

static inline int16_t cnx_clamp_sub_i16(int16_t a, int16_t b) {
    if (b > 0 && a < INT16_MIN + b) return INT16_MIN;
    if (b < 0 && a > INT16_MAX + b) return INT16_MAX;
    return a - b;
}

static inline int32_t cnx_clamp_add_i32(int32_t a, int32_t b) {
    if (b > 0 && a > INT32_MAX - b) return INT32_MAX;
    if (b < 0 && a < INT32_MIN - b) return INT32_MIN;
    return a + b;
}

static inline int32_t cnx_clamp_sub_i32(int32_t a, int32_t b) {
    if (b > 0 && a < INT32_MIN + b) return INT32_MIN;
    if (b < 0 && a > INT32_MAX + b) return INT32_MAX;
    return a - b;
}

/* Scope: ClampTest */
uint8_t ClampTest_brightness = 200;
uint16_t ClampTest_sensorValue = 60000;
uint32_t ClampTest_counter = 4000000000;
int8_t ClampTest_temperature = -100;
int16_t ClampTest_altitude = 30000;
int32_t ClampTest_position = 2000000000;

uint8_t ClampTest_getBrightness(void) {
    return ClampTest_brightness;
}

uint16_t ClampTest_getSensorValue(void) {
    return ClampTest_sensorValue;
}

uint32_t ClampTest_getCounter(void) {
    return ClampTest_counter;
}

int8_t ClampTest_getTemperature(void) {
    return ClampTest_temperature;
}

int16_t ClampTest_getAltitude(void) {
    return ClampTest_altitude;
}

int32_t ClampTest_getPosition(void) {
    return ClampTest_position;
}

void ClampTest_increaseBrightness(void) {
    ClampTest_brightness = cnx_clamp_add_u8(ClampTest_brightness, 100);
}

void ClampTest_increaseSensorValue(void) {
    ClampTest_sensorValue = cnx_clamp_add_u16(ClampTest_sensorValue, 10000);
}

void ClampTest_increaseCounter(void) {
    ClampTest_counter = cnx_clamp_add_u32(ClampTest_counter, 500000000);
}

void ClampTest_decreaseTemperature(void) {
    ClampTest_temperature = cnx_clamp_sub_i8(ClampTest_temperature, 50);
}

void ClampTest_decreaseAltitude(void) {
    ClampTest_altitude = cnx_clamp_sub_i16(ClampTest_altitude, 5000);
}

void ClampTest_decreasePosition(void) {
    ClampTest_position = cnx_clamp_sub_i32(ClampTest_position, 100000000);
}

void ClampTest_dimBrightness(void) {
    ClampTest_brightness = cnx_clamp_sub_u8(ClampTest_brightness, 250);
}

void ClampTest_resetSensor(void) {
    ClampTest_sensorValue = cnx_clamp_sub_u16(ClampTest_sensorValue, 65000);
}

void ClampTest_adjustAll(void) {
    ClampTest_brightness = cnx_clamp_add_u8(ClampTest_brightness, 10);
    ClampTest_sensorValue = cnx_clamp_add_u16(ClampTest_sensorValue, 100);
    ClampTest_temperature = cnx_clamp_sub_i8(ClampTest_temperature, 5);
    ClampTest_altitude = cnx_clamp_add_i16(ClampTest_altitude, 1000);
}

void main(void) {
    ClampTest_getBrightness();
    ClampTest_getSensorValue();
    ClampTest_getCounter();
    ClampTest_getTemperature();
    ClampTest_getAltitude();
    ClampTest_getPosition();
    ClampTest_increaseBrightness();
    ClampTest_increaseSensorValue();
    ClampTest_increaseCounter();
    ClampTest_decreaseTemperature();
    ClampTest_decreaseAltitude();
    ClampTest_decreasePosition();
    ClampTest_dimBrightness();
    ClampTest_resetSensor();
    ClampTest_adjustAll();
}
