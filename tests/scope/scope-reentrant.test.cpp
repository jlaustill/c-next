/**
 * Generated by C-Next Transpiler from: scope-reentrant.test.cnx
 * A safer C for embedded systems
 */

#include "scope-reentrant.test.hpp"

#include <stdint.h>

// test-execution
// Tests: Scope variable reentrancy - single-function variables should be local
//
// Issue #232: Variables used in only ONE function become function-local,
// making them reentrant. Variables used in multiple functions stay shared.
// Pass a value through a global to avoid scope method call argument issue
uint32_t call_arg = 0U;

/* Scope: Reentrant */
static uint32_t Reentrant_outer_temp = 0U;
static uint32_t Reentrant_inner_temp = 0U;

uint32_t Reentrant_inner(void) {
    Reentrant_inner_temp = call_arg;
    return call_arg;
}

uint32_t Reentrant_outer(uint32_t x) {
    Reentrant_outer_temp = x;
    call_arg = x + 100U;
    uint32_t inner_result = Reentrant_inner();
    return Reentrant_outer_temp;
}

int main(void) {
    uint32_t result = Reentrant_outer(10U);
    if (result != 10) return 1;
    return 0;
}
