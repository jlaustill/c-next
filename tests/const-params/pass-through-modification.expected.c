/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include <stdint.h>

/* test-execution */
// Tests: Issue #268 - pass-through modification tracking for auto-const
// When a parameter is passed to a function that modifies it,
// the parameter should NOT get const (since it's effectively modified).
// Function that modifies its parameter - should NOT get const
void modifiesParam(uint32_t* value) {
    (*value) = 42;
}

// Function that passes its parameter to modifiesParam
// Since modifiesParam modifies its param, this param is also modified
// Should NOT get const (pass-through modification)
void passesThroughToModifier(uint32_t* value) {
    modifiesParam(value);
}

// Function that only reads its parameter - SHOULD get const
uint32_t readOnly(const uint32_t* value) {
    return (*value) + 1;
}

// Function that passes to readOnly - parameter is NOT modified
// SHOULD get const since readOnly doesn't modify it
uint32_t passesThroughToReader(const uint32_t* value) {
    return readOnly(value);
}

// Mixed case: reads and passes to modifier
// Should NOT get const because of pass-through to modifier
void mixedPassThrough(uint32_t* value) {
    uint32_t local = (*value) + 1;
    modifiesParam(value);
}

int main(void) {
    uint32_t x = 10;
    modifiesParam(&x);
    if (x != 42) return 1;
    x = 100;
    passesThroughToModifier(&x);
    if (x != 42) return 2;
    x = 5;
    uint32_t result = readOnly(&x);
    if (result != 6) return 3;
    if (x != 5) return 4;
    x = 7;
    result = passesThroughToReader(&x);
    if (result != 8) return 5;
    if (x != 7) return 6;
    x = 200;
    mixedPassThrough(&x);
    if (x != 42) return 7;
    return 0;
}
