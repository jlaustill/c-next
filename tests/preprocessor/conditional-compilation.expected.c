/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include "conditional-compilation.test.h"

// ADR-037: Conditional compilation directives
// These pass through to the generated C for the C preprocessor to handle
// Note: Inline conditionals (around code blocks) are handled by the C preprocessor
#include <stdint.h>
#include <stdbool.h>

// Platform flags (no values allowed)
#define TEENSY
#define HAS_LED
#ifdef TEENSY
#endif
#ifndef DEBUG
#else
#endif

#include <stdint.h>
#include <stdbool.h>

// Use const for values (not #define)
const uint32_t LED_BIT = 3;

const uint32_t BLINK_DELAY = 1000;

/* Register: GPIO7 @ 0x42004000 */
#define GPIO7_DR (*(volatile uint32_t*)(0x42004000 + 0x00))
#define GPIO7_DR_SET (*(volatile uint32_t*)(0x42004000 + 0x84))
#define GPIO7_DR_CLEAR (*(volatile uint32_t*)(0x42004000 + 0x88))
#define GPIO7_DR_TOGGLE (*(volatile uint32_t*)(0x42004000 + 0x8C))

/* Scope: LED */

void LED_on(void) {
    GPIO7_DR_SET = (1 << LED_BIT);
}

void LED_off(void) {
    GPIO7_DR_CLEAR = (1 << LED_BIT);
}

void setup(void) {
}

void loop(void) {
    LED_on();
}
