/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include <stdint.h>
#include <stdbool.h>

// ADR-017: Scoped Enum Test
// Tests enums declared inside scopes with proper prefixing
const uint8_t defaultValue = 3;

/* Scope: Motor */

typedef enum {
    Motor_State_IDLE = 0,
    Motor_State_RUNNING = 1,
    Motor_State_STALLED = 2
} Motor_State;

uint8_t Motor_defaultValue = 1;
Motor_State Motor_current = Motor_State_IDLE;

uint8_t Motor_start(void) {
    Motor_current = Motor_State_RUNNING;
    return Motor_defaultValue;
}

uint8_t Motor_stop(void) {
    Motor_current = Motor_State_IDLE;
    return defaultValue;
}

bool Motor_isRunning(void) {
    const Motor_State currentState = Motor_current;
    if (currentState == Motor_State_RUNNING) {
        return true;
    }
    return false;
}

// Usage from outside the scope
Motor_State externalState = Motor_State_IDLE;

void main(void) {
    Motor_start();
    if (Motor_current == Motor_State_RUNNING) {
        externalState = Motor_State_STALLED;
    }
}
