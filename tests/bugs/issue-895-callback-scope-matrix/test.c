/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include "test.h"

#include "widget.h"
#include "defs.h"

#include <stdint.h>

// ==========================================================================
// FILE B: Cross-file registration tests + own callback definitions
//
// Defines 3 more callbacks:
//   B_G:  Global function (this file)
//   B_SP: Scope public method  (in ScopeBP)
//   B_SV: Scope private method (in ScopeBV)
//
// Tests registration of ALL 6 callbacks from every legal access site.
// ==========================================================================
// --- B_G: Global callback in file B ---
void b_global_cb(widget_t* w, const rect_t* area, uint8_t* buf) {
    widget_flush_ready(&(*w));
}

// --- B_SP: Scope public callback in file B ---
/* Scope: ScopeBP */

void ScopeBP_cb(widget_t w, const rect_t* area, uint8_t buf) {
    widget_flush_ready(&w);
}

// --- B_SV: Scope private callback in file B ---
/* Scope: ScopeBV */

static void ScopeBV_cb(widget_t w, const rect_t* area, uint8_t buf) {
    widget_flush_ready(&w);
}

void ScopeBV_reg_from_public(void) {
    widget_t w = widget_create();
    widget_set_flush_cb(&w, ScopeBV_cb);
}

static void ScopeBV_reg_from_private_helper(void) {
    widget_t w = widget_create();
    widget_set_flush_cb(&w, ScopeBV_cb);
}

void ScopeBV_reg_from_private(void) {
    ScopeBV_reg_from_private_helper();
}

// ==========================================================================
// B_G (same-file global) registered from every access site in file B
// ==========================================================================
// B_G from same-file global function
void b_reg_bg_from_global(void) {
    widget_t w = widget_create();
    widget_set_flush_cb(&w, b_global_cb);
}

// B_G from same-file scope public method
/* Scope: RegBGPub */

void RegBGPub_register_it(void) {
    widget_t w = widget_create();
    widget_set_flush_cb(&w, b_global_cb);
}

// B_G from same-file scope private method
/* Scope: RegBGPriv */

static void RegBGPriv_helper(void) {
    widget_t w = widget_create();
    widget_set_flush_cb(&w, b_global_cb);
}

void RegBGPriv_register_it(void) {
    RegBGPriv_helper();
}

// ==========================================================================
// B_SP (same-file scope public) registered from every access site in file B
// ==========================================================================
// B_SP from same-file global function
void b_reg_bsp_from_global(void) {
    widget_t w = widget_create();
    widget_set_flush_cb(&w, ScopeBP_cb);
}

// B_SP from same-file same-scope public method
/* Scope: ScopeBPSelf */

void ScopeBPSelf_cb(widget_t w, const rect_t* area, uint8_t buf) {
    widget_flush_ready(&w);
}

void ScopeBPSelf_reg_from_public(void) {
    widget_t w = widget_create();
    widget_set_flush_cb(&w, ScopeBPSelf_cb);
}

static void ScopeBPSelf_reg_from_private_helper(void) {
    widget_t w = widget_create();
    widget_set_flush_cb(&w, ScopeBPSelf_cb);
}

void ScopeBPSelf_reg_from_private(void) {
    ScopeBPSelf_reg_from_private_helper();
}

// B_SP from same-file different-scope public method
/* Scope: RegBSPDiffPub */

void RegBSPDiffPub_register_it(void) {
    widget_t w = widget_create();
    widget_set_flush_cb(&w, ScopeBP_cb);
}

// B_SP from same-file different-scope private method
/* Scope: RegBSPDiffPriv */

static void RegBSPDiffPriv_helper(void) {
    widget_t w = widget_create();
    widget_set_flush_cb(&w, ScopeBP_cb);
}

void RegBSPDiffPriv_register_it(void) {
    RegBSPDiffPriv_helper();
}

// ==========================================================================
// A_G (cross-file global) registered from every access site in file B
// ==========================================================================
// A_G from diff-file global function
void b_reg_ag_from_global(void) {
    widget_t w = widget_create();
    widget_set_flush_cb(&w, a_global_cb);
}

// A_G from diff-file scope public method
/* Scope: RegAGCrossPub */

void RegAGCrossPub_register_it(void) {
    widget_t w = widget_create();
    widget_set_flush_cb(&w, a_global_cb);
}

// A_G from diff-file scope private method
/* Scope: RegAGCrossPriv */

static void RegAGCrossPriv_helper(void) {
    widget_t w = widget_create();
    widget_set_flush_cb(&w, a_global_cb);
}

void RegAGCrossPriv_register_it(void) {
    RegAGCrossPriv_helper();
}

// ==========================================================================
// A_SP (cross-file scope public) registered from every access site in file B
// ==========================================================================
// A_SP from diff-file global function
void b_reg_asp_from_global(void) {
    widget_t w = widget_create();
    widget_set_flush_cb(&w, ScopeAP_cb);
}

// A_SP from diff-file scope public method
/* Scope: RegASPCrossPub */

void RegASPCrossPub_register_it(void) {
    widget_t w = widget_create();
    widget_set_flush_cb(&w, ScopeAP_cb);
}

// A_SP from diff-file scope private method
/* Scope: RegASPCrossPriv */

static void RegASPCrossPriv_helper(void) {
    widget_t w = widget_create();
    widget_set_flush_cb(&w, ScopeAP_cb);
}

void RegASPCrossPriv_register_it(void) {
    RegASPCrossPriv_helper();
}

// ==========================================================================
// main() â€” exercises every registration path
// ==========================================================================
int main(void) {
    a_reg_global_from_global();
    RegAGPub_register_it();
    RegAGPriv_register_it();
    a_reg_sp_from_global();
    RegASPDiffPub_register_it();
    RegASPDiffPriv_register_it();
    ScopeAPSelf_reg_from_public();
    ScopeAPSelf_reg_from_private();
    ScopeAV_reg_from_public();
    ScopeAV_reg_from_private();
    b_reg_bg_from_global();
    RegBGPub_register_it();
    RegBGPriv_register_it();
    b_reg_bsp_from_global();
    RegBSPDiffPub_register_it();
    RegBSPDiffPriv_register_it();
    ScopeBPSelf_reg_from_public();
    ScopeBPSelf_reg_from_private();
    ScopeBV_reg_from_public();
    ScopeBV_reg_from_private();
    b_reg_ag_from_global();
    RegAGCrossPub_register_it();
    RegAGCrossPriv_register_it();
    b_reg_asp_from_global();
    RegASPCrossPub_register_it();
    RegASPCrossPriv_register_it();
    return 0;
}
