/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include <stdint.h>

// test-execution
// Issue #281: const incorrectly added to pointer parameter that is modified
// Tests that scope functions correctly omit const for modified pointer parameters
/* Scope: TestScope */

void TestScope_increment(uint32_t* x) {
    (*x) = (*x) + 1;
}

uint32_t TestScope_accumulate(uint32_t* sum, uint32_t value) {
    (*sum) = (*sum) + value;
    return (*sum);
}

void TestScope_doubleIncrement(uint32_t* x) {
    (*x) = (*x) + 1;
    (*x) = (*x) + 1;
}

void TestScope_switchIncrement(uint32_t* x, uint32_t mode) {
    switch (mode) {
        case 1: {
            (*x) = (*x) + 10;
            break;
        }
        case 2: {
            (*x) = (*x) + 20;
            break;
        }
        default: {
            (*x) = (*x) + 1;
            break;
        }
    }
}

int main(void) {
    uint32_t counter = 10;
    TestScope_increment(&counter);
    if (counter != 11) return 1;
    uint32_t total = 100;
    uint32_t result = TestScope_accumulate(&total, 50);
    if (total != 150) return 2;
    if (result != 150) return 3;
    uint32_t doubled = 5;
    TestScope_doubleIncrement(&doubled);
    if (doubled != 7) return 4;
    uint32_t switchVal = 100;
    TestScope_switchIncrement(&switchVal, 1);
    if (switchVal != 110) return 5;
    switchVal = 100;
    TestScope_switchIncrement(&switchVal, 2);
    if (switchVal != 120) return 6;
    switchVal = 100;
    TestScope_switchIncrement(&switchVal, 99);
    if (switchVal != 101) return 7;
    return 0;
}
