/**
 * Generated by C-Next Transpiler from: primitive-ref-deref.test.cnx
 * A safer C for embedded systems
 */

#include "primitive-ref-deref.test.hpp"

#include <stdint.h>

// test-cpp-only
// Bug #558: Primitive parameter reassigned should not use pointer dereference in C++ mode
// When a primitive is reassigned, it becomes a reference (uint32_t&)
// The body should use 'val' directly, not '(*val)'
/* Scope: Test */

uint32_t Test_helper(uint32_t x) {
    return x + 1;
}

uint32_t Test_process(uint32_t& val) {
    val = Test_helper(val);
    return val;
}

int main(void) {
    uint32_t input = 5U;
    uint32_t result = Test_process(input);
    if (result != 6) return 1;
    return 0;
}
