/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include <stdint.h>

// ADR-044: Overflow helper functions
#include <limits.h>

static inline int8_t cnx_clamp_add_i8(int8_t a, int32_t b) {
    int32_t result = (int32_t)a + b;
    if (result > INT8_MAX) return INT8_MAX;
    if (result < INT8_MIN) return INT8_MIN;
    return (int8_t)result;
}

static inline int8_t cnx_clamp_sub_i8(int8_t a, int32_t b) {
    int32_t result = (int32_t)a - b;
    if (result > INT8_MAX) return INT8_MAX;
    if (result < INT8_MIN) return INT8_MIN;
    return (int8_t)result;
}

/* test-execution */
// Tests: clamp modifier for i8 type (-128 to 127)
// Validates overflow clamps to 127, underflow clamps to -128
// ADR-044: Per-variable overflow semantics
uint32_t main(void) {
    int8_t val = 100;
    val = cnx_clamp_add_i8(val, 50);
    if (val != 127) return 1;
    val = 127;
    val = cnx_clamp_add_i8(val, 1);
    if (val != 127) return 2;
    val = 50;
    val = cnx_clamp_add_i8(val, 100);
    if (val != 127) return 3;
    val = 1;
    val = cnx_clamp_add_i8(val, 127);
    if (val != 127) return 4;
    val = 120;
    val = cnx_clamp_add_i8(val, 20);
    if (val != 127) return 5;
    val = cnx_clamp_add_i8(val, 10);
    if (val != 127) return 6;
    val = -100;
    val = cnx_clamp_sub_i8(val, 50);
    if (val != -128) return 7;
    val = -128;
    val = cnx_clamp_sub_i8(val, 1);
    if (val != -128) return 8;
    val = -50;
    val = cnx_clamp_sub_i8(val, 100);
    if (val != -128) return 9;
    val = -120;
    val = cnx_clamp_sub_i8(val, 20);
    if (val != -128) return 10;
    val = cnx_clamp_sub_i8(val, 10);
    if (val != -128) return 11;
    val = 10;
    val = cnx_clamp_sub_i8(val, 50);
    if (val != -40) return 12;
    val = -10;
    val = cnx_clamp_add_i8(val, 50);
    if (val != 40) return 13;
    val = 50;
    val = cnx_clamp_add_i8(val, 100);
    if (val != 127) return 14;
    val = -50;
    val = cnx_clamp_sub_i8(val, 100);
    if (val != -128) return 15;
    val = 50;
    val = cnx_clamp_add_i8(val, 30);
    if (val != 80) return 16;
    val = -50;
    val = cnx_clamp_sub_i8(val, 30);
    if (val != -80) return 17;
    val = 0;
    val = cnx_clamp_add_i8(val, 100);
    if (val != 100) return 18;
    val = 50;
    val = cnx_clamp_sub_i8(val, 50);
    if (val != 0) return 19;
    val = 126;
    val = cnx_clamp_add_i8(val, 1);
    if (val != 127) return 20;
    val = -127;
    val = cnx_clamp_sub_i8(val, 1);
    if (val != -128) return 21;
    val = 64;
    val = cnx_clamp_add_i8(val, 0);
    if (val != 64) return 22;
    val = -64;
    val = cnx_clamp_sub_i8(val, 0);
    if (val != -64) return 23;
    val = 100;
    val = cnx_clamp_add_i8(val, 50);
    if (val != 127) return 24;
    val = cnx_clamp_sub_i8(val, 127);
    if (val != 0) return 25;
    val = cnx_clamp_sub_i8(val, 127);
    if (val != -127) return 26;
    val = cnx_clamp_sub_i8(val, 127);
    if (val != -128) return 27;
    return 0;
}
