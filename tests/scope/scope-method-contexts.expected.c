/**
 * Generated by C-Next Transpiler from: scope-method-contexts.test.cnx
 * A safer C for embedded systems
 */

#include "scope-method-contexts.test.h"

#include <stdint.h>
#include <stdbool.h>

// ADR-044: Overflow helper functions
#include <limits.h>

static inline uint16_t cnx_clamp_add_u16(uint16_t a, uint32_t b) {
    if (b > (uint32_t)(UINT16_MAX - a)) return UINT16_MAX;
    uint16_t result;
    if (__builtin_add_overflow(a, (uint16_t)b, &result)) return UINT16_MAX;
    return result;
}

static inline uint8_t cnx_clamp_add_u8(uint8_t a, uint32_t b) {
    if (b > (uint32_t)(UINT8_MAX - a)) return UINT8_MAX;
    uint8_t result;
    if (__builtin_add_overflow(a, (uint8_t)b, &result)) return UINT8_MAX;
    return result;
}

// test-execution
// Test: ADR-016 Modifiers in public and private method contexts
// Verifies that this. and global. accessors work correctly in all method contexts
// Tests: public methods, private methods, local variables with modifiers, combined access patterns
// Global variables for testing global. accessor in all method contexts
const uint8_t GLOBAL_MAX = 100U;

const uint16_t GLOBAL_THRESHOLD = 1000U;

uint8_t globalCounter = 50U;

bool globalEnabled = true;

int16_t globalOffset = -25;

float globalScale = 2.5;

/* Scope: MethodContexts */
static uint8_t MethodContexts_privateValue = 10U;
static uint8_t MethodContexts_privateClampValue = 200U;
static uint8_t MethodContexts_privateWrapValue = 250U;
static bool MethodContexts_privateFlag = false;
static int16_t MethodContexts_privateOffset = -50;
uint8_t MethodContexts_publicValue = 20U;
uint16_t MethodContexts_publicClampValue = 60000U;
uint16_t MethodContexts_publicWrapValue = 65530U;
bool MethodContexts_publicFlag = true;
int32_t MethodContexts_publicOffset = -1000;

uint8_t MethodContexts_getPrivateValue(void) {
    return MethodContexts_privateValue;
}

uint8_t MethodContexts_getPublicValueInternal(void) {
    return MethodContexts_publicValue;
}

uint8_t MethodContexts_getPrivateClampValue(void) {
    return MethodContexts_privateClampValue;
}

uint8_t MethodContexts_getPrivateWrapValue(void) {
    return MethodContexts_privateWrapValue;
}

void MethodContexts_incrementPrivateClamp(void) {
    MethodContexts_privateClampValue = cnx_clamp_add_u8(MethodContexts_privateClampValue, 100U);
}

void MethodContexts_incrementPrivateWrap(void) {
    MethodContexts_privateWrapValue += 10U;
}

bool MethodContexts_getPrivateFlag(void) {
    return MethodContexts_privateFlag;
}

int16_t MethodContexts_getPrivateOffset(void) {
    return MethodContexts_privateOffset;
}

uint8_t MethodContexts_getGlobalMaxInternal(void) {
    return GLOBAL_MAX;
}

uint8_t MethodContexts_getGlobalCounterInternal(void) {
    return globalCounter;
}

bool MethodContexts_getGlobalEnabledInternal(void) {
    return globalEnabled;
}

int16_t MethodContexts_getGlobalOffsetInternal(void) {
    return globalOffset;
}

float MethodContexts_getGlobalScaleInternal(void) {
    return globalScale;
}

uint8_t MethodContexts_computePrivateSum(void) {
    return MethodContexts_privateValue + globalCounter;
}

bool MethodContexts_privateValueBelowMax(void) {
    return MethodContexts_privateValue < GLOBAL_MAX;
}

int16_t MethodContexts_computePrivateWithOffset(void) {
    return MethodContexts_privateOffset + globalOffset;
}

uint8_t MethodContexts_getPrivateValueExternal(void) {
    return MethodContexts_privateValue;
}

uint8_t MethodContexts_getPublicValue(void) {
    return MethodContexts_publicValue;
}

uint16_t MethodContexts_getPublicClampValue(void) {
    return MethodContexts_publicClampValue;
}

uint16_t MethodContexts_getPublicWrapValue(void) {
    return MethodContexts_publicWrapValue;
}

void MethodContexts_incrementPublicClamp(void) {
    MethodContexts_publicClampValue = cnx_clamp_add_u16(MethodContexts_publicClampValue, 10000U);
}

void MethodContexts_incrementPublicWrap(void) {
    MethodContexts_publicWrapValue += 10U;
}

bool MethodContexts_getPublicFlag(void) {
    return MethodContexts_publicFlag;
}

int32_t MethodContexts_getPublicOffset(void) {
    return MethodContexts_publicOffset;
}

void MethodContexts_setPrivateValue(uint8_t val) {
    MethodContexts_privateValue = val;
}

void MethodContexts_setPublicValue(uint8_t val) {
    MethodContexts_publicValue = val;
}

void MethodContexts_setPrivateFlag(bool val) {
    MethodContexts_privateFlag = val;
}

void MethodContexts_setPublicFlag(bool val) {
    MethodContexts_publicFlag = val;
}

uint8_t MethodContexts_getGlobalMax(void) {
    return GLOBAL_MAX;
}

uint16_t MethodContexts_getGlobalThreshold(void) {
    return GLOBAL_THRESHOLD;
}

uint8_t MethodContexts_getGlobalCounter(void) {
    return globalCounter;
}

bool MethodContexts_getGlobalEnabled(void) {
    return globalEnabled;
}

int16_t MethodContexts_getGlobalOffset(void) {
    return globalOffset;
}

float MethodContexts_getGlobalScale(void) {
    return globalScale;
}

uint8_t MethodContexts_computePublicSum(void) {
    return MethodContexts_publicValue + globalCounter;
}

bool MethodContexts_publicValueBelowMax(void) {
    return MethodContexts_publicValue < GLOBAL_MAX;
}

int32_t MethodContexts_computePublicWithOffset(void) {
    return MethodContexts_publicOffset + globalOffset;
}

uint8_t MethodContexts_getPrivateSumViaInternal(void) {
    return MethodContexts_computePrivateSum();
}

uint8_t MethodContexts_getGlobalCounterViaInternal(void) {
    return MethodContexts_getGlobalCounterInternal();
}

uint8_t MethodContexts_getPrivateClampViaInternal(void) {
    return MethodContexts_getPrivateClampValue();
}

void MethodContexts_modifyAllPrivate(void) {
    MethodContexts_privateValue = MethodContexts_privateValue + 1U;
    MethodContexts_privateClampValue = cnx_clamp_add_u8(MethodContexts_privateClampValue, 10U);
    MethodContexts_privateWrapValue += 5U;
    MethodContexts_privateFlag = !MethodContexts_privateFlag;
    MethodContexts_privateOffset = MethodContexts_privateOffset - 10;
}

void MethodContexts_modifyAllPublic(void) {
    MethodContexts_publicValue = MethodContexts_publicValue + 1U;
    MethodContexts_publicClampValue = cnx_clamp_add_u16(MethodContexts_publicClampValue, 100U);
    MethodContexts_publicWrapValue += 5U;
    MethodContexts_publicFlag = !MethodContexts_publicFlag;
    MethodContexts_publicOffset = MethodContexts_publicOffset - 100;
}

bool MethodContexts_checkThresholds(void) {
    return MethodContexts_publicClampValue < GLOBAL_THRESHOLD && MethodContexts_privateValue < GLOBAL_MAX;
}

bool MethodContexts_getAllFlags(void) {
    return MethodContexts_privateFlag && MethodContexts_publicFlag && globalEnabled;
}

int main(void) {
    uint8_t res1 = MethodContexts_getPrivateValueExternal();
    if (res1 != 10) return 1;
    uint8_t res2 = MethodContexts_getPrivateSumViaInternal();
    if (res2 != 60) return 2;
    uint8_t res3 = MethodContexts_getGlobalCounterViaInternal();
    if (res3 != 50) return 3;
    uint8_t res4 = MethodContexts_getPrivateClampViaInternal();
    if (res4 != 200) return 4;
    uint8_t res5 = MethodContexts_getPublicValue();
    if (res5 != 20) return 5;
    uint16_t res6 = MethodContexts_getPublicClampValue();
    if (res6 != 60000) return 6;
    uint16_t res7 = MethodContexts_getPublicWrapValue();
    if (res7 != 65530) return 7;
    bool res8 = MethodContexts_getPublicFlag();
    if (res8 != true) return 8;
    int32_t res9 = MethodContexts_getPublicOffset();
    if (res9 != -1000) return 9;
    uint8_t res10 = MethodContexts_getGlobalMax();
    if (res10 != 100) return 10;
    uint16_t res11 = MethodContexts_getGlobalThreshold();
    if (res11 != 1000) return 11;
    uint8_t res12 = MethodContexts_getGlobalCounter();
    if (res12 != 50) return 12;
    bool res13 = MethodContexts_getGlobalEnabled();
    if (res13 != true) return 13;
    int16_t res14 = MethodContexts_getGlobalOffset();
    if (res14 != -25) return 14;
    float expectedScale = 2.5;
    float res15 = MethodContexts_getGlobalScale();
    if (res15 != expectedScale) return 15;
    uint8_t res16 = MethodContexts_computePublicSum();
    if (res16 != 70) return 16;
    bool res17 = MethodContexts_publicValueBelowMax();
    if (res17 != true) return 17;
    int32_t res18 = MethodContexts_computePublicWithOffset();
    if (res18 != -1025) return 18;
    MethodContexts_setPrivateValue(42U);
    uint8_t res19 = MethodContexts_getPrivateValueExternal();
    if (res19 != 42) return 19;
    uint8_t res20 = MethodContexts_getPrivateSumViaInternal();
    if (res20 != 92) return 20;
    MethodContexts_setPublicValue(84U);
    uint8_t res21 = MethodContexts_getPublicValue();
    if (res21 != 84) return 21;
    uint8_t res22 = MethodContexts_computePublicSum();
    if (res22 != 134) return 22;
    MethodContexts_setPrivateFlag(true);
    MethodContexts_setPublicFlag(false);
    bool res24 = MethodContexts_getPublicFlag();
    if (res24 != false) return 24;
    MethodContexts_incrementPublicClamp();
    uint16_t res25 = MethodContexts_getPublicClampValue();
    if (res25 != 65535) return 25;
    MethodContexts_incrementPublicWrap();
    uint16_t res26 = MethodContexts_getPublicWrapValue();
    if (res26 != 4) return 26;
    MethodContexts_modifyAllPrivate();
    uint8_t res27 = MethodContexts_getPrivateValueExternal();
    if (res27 != 43) return 27;
    uint8_t res28 = MethodContexts_getPrivateClampViaInternal();
    if (res28 != 210) return 28;
    MethodContexts_modifyAllPublic();
    uint8_t res30 = MethodContexts_getPublicValue();
    if (res30 != 85) return 30;
    uint16_t res31 = MethodContexts_getPublicClampValue();
    if (res31 != 65535) return 31;
    uint16_t res32 = MethodContexts_getPublicWrapValue();
    if (res32 != 9) return 32;
    bool res33 = MethodContexts_getPublicFlag();
    if (res33 != true) return 33;
    int32_t res34 = MethodContexts_getPublicOffset();
    if (res34 != -1100) return 34;
    bool res35 = MethodContexts_checkThresholds();
    if (res35 != false) return 35;
    bool res36 = MethodContexts_getAllFlags();
    if (res36 != false) return 36;
    if (MethodContexts_publicValue != 85) return 37;
    if (MethodContexts_publicClampValue != 65535) return 38;
    if (MethodContexts_publicWrapValue != 9) return 39;
    if (MethodContexts_publicFlag != true) return 40;
    if (MethodContexts_publicOffset != -1100) return 41;
    MethodContexts_publicValue = 99;
    uint8_t res42 = MethodContexts_getPublicValue();
    if (res42 != 99) return 42;
    MethodContexts_publicFlag = false;
    bool res43 = MethodContexts_getPublicFlag();
    if (res43 != false) return 43;
    return 0;
}
