// Test: Bare register access from inside a scope should work when NOT shadowed
// Issue #779: Ambiguity-aware validation - only require global. when shadowed
// This is the happy path companion to cross-scope-register-bare-error.test.cnx

register GPIO @ 0x40000000 {
    DR:  u32 rw @ 0x00,
    DIR: u32 rw @ 0x04,
}

scope Motor {
    // No shadowing of GPIO - bare access should work
    u32 speed <- 0;

    public void configure() {
        // OK: GPIO is not shadowed, bare access allowed
        GPIO.DR <- 0x01;
        GPIO.DIR <- 0xFF;
    }
}

void main() {
    Motor.configure();
}
