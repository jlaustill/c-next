// Tests: Issue #502 - C-Next scope types must use _ NOT ::
// This ensures the fix doesn't incorrectly convert C-Next scope types

// C-Next scope - Motor_State should stay as Motor_State (underscore)
scope Motor {
    public struct State {
        i32 position;
        bool running;
    }
}

// Another scope to test nesting
scope Sensor {
    public struct Reading {
        Motor.State motorState;  // Should be Motor_State, NOT Motor::State
        i32 value;
    }
}

// Test: C-Next nested types must use _ not ::
Sensor.Reading reading <- {
    motorState: { position: 0, running: false },
    value: 42
};

u32 main() {
    // Test 1: Verify initial values
    if (global.reading.value != 42) return 1;
    if (global.reading.motorState.position != 0) return 2;
    if (global.reading.motorState.running != false) return 3;

    // Test 2: Modify nested struct
    global.reading.motorState.position <- 100;
    global.reading.motorState.running <- true;
    if (global.reading.motorState.position != 100) return 4;
    if (global.reading.motorState.running != true) return 5;

    return 0;
}
