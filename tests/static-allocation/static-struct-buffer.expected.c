/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include <stdint.h>

/* test-execution */
// ADR-003: Static struct buffer allocation
// Tests: array of structs with member access
typedef struct {
    uint32_t timestamp;
    int16_t value;
    uint8_t sensorId;
} SensorReading;

// Fixed-size array of readings - no heap allocation
SensorReading readings[10] = {0};

void addReading(uint8_t* index, uint32_t* ts, int16_t* val, uint8_t* id) {
    readings[(*index)].timestamp = (*ts);
    readings[(*index)].value = (*val);
    readings[(*index)].sensorId = (*id);
}

int main(void) {
    uint8_t idx0 = 0;
    uint8_t idx1 = 1;
    uint8_t idx2 = 2;
    uint32_t ts1 = 1000;
    uint32_t ts2 = 2000;
    uint32_t ts3 = 3000;
    int16_t val1 = 25;
    int16_t val2 = 30;
    int16_t val3 = -5;
    uint8_t id1 = 1;
    uint8_t id2 = 2;
    addReading(&idx0, &ts1, &val1, &id1);
    addReading(&idx1, &ts2, &val2, &id2);
    addReading(&idx2, &ts3, &val3, &id1);
    if (readings[0].value == 25 && readings[1].value == 30 && readings[2].value == -5) {
        return 0;
    }
    return 1;
}
