// test-execution
// Issue #328: Transpiler detects false symbol conflict with its own generated output files
//
// Scenario: During incremental migration:
// 1. Display/AppData.cnx - the C-Next struct definition (source of truth)
// 2. Display/AppData.h - the generated header (has "Generated by C-Next Transpiler" marker)
// 3. SomeModule.hpp - a C++ module that includes the generated AppData.h
// 4. This file includes BOTH the C++ header AND the .cnx file
//
// The transpiler should NOT report a conflict because Display/AppData.h was generated
// from Display/AppData.cnx and contains the C-Next Transpiler marker.

#include "SomeModule.hpp"
#include <Display/AppData.cnx>

// Use the struct from the included .cnx file
AppData sensorData;

u32 main() {
    // Initialize and use the struct
    sensorData.humidity <- 65.5;
    sensorData.temperature <- 22.3;

    // Call C++ method to validate data (doesn't modify, just reads)
    i32 valid <- global.SomeModule.validateHumidity(sensorData.humidity);

    // Verify the C++ method returned valid (1)
    if (valid != 1) return 1;

    // Verify original struct values
    if (sensorData.humidity < 65.0) return 2;
    if (sensorData.humidity > 66.0) return 3;
    if (sensorData.temperature < 22.0) return 4;
    if (sensorData.temperature > 23.0) return 5;

    return 0;
}
