// test-execution
// Test .length for enum type in various contexts
// Tests: .length returns 32 for enum
// Issue #121: Enums were previously returning 0 for .length
enum State {
    IDLE,
    RUNNING,
    ERROR
}

State globalVar <- State.IDLE;

scope TestScope {
    public u32 getGlobalLength() {
        return global.globalVar.length;
    }
    public State publicMember <- global.State.IDLE;
}

u32 checkParamLength(State param) {
    return param.length;
}

i32 main() {
    // Test 1: Global enum variable .length
    u32 len <- globalVar.length;
    if (len != 32) {
        return 1;
    }

    // Test 2: Global accessed from scope function
    len <- TestScope.getGlobalLength();
    if (len != 32) {
        return 2;
    }

    // Test 3: Public scope member accessed directly
    len <- TestScope.publicMember.length;
    if (len != 32) {
        return 3;
    }

    // Test 4: Local enum variable .length
    State localVar <- State.IDLE;
    len <- localVar.length;
    if (len != 32) {
        return 4;
    }

    // Test 5: Enum parameter .length
    State testVal <- State.RUNNING;
    len <- checkParamLength(testVal);
    if (len != 32) {
        return 5;
    }

    return 0;
}
