/**
 * Generated by C-Next Transpiler from: nested-calls.test.cnx
 * A safer C for embedded systems
 */

#include <stdint.h>

// test-execution
// Tests: Pass-by-value in nested function calls
// Coverage: Values passed through call chains
// Level 3: deepest functions
uint32_t addOne(uint32_t val) {
    return val + 1;
}

void modifyAddOne(uint32_t* val) {
    (*val) += 1U;
}

// Level 2: middle functions
uint32_t addTwo(uint32_t val) {
    uint32_t temp = addOne(val);
    return addOne(temp);
}

void modifyAddTwo(uint32_t* val) {
    modifyAddOne(val);
    modifyAddOne(val);
}

uint32_t mixedChain(uint32_t* val) {
    uint32_t result = addOne((*val));
    modifyAddOne(val);
    return result + (*val);
}

// Level 1: top functions
uint32_t addFour(uint32_t val) {
    uint32_t temp = addTwo(val);
    return addTwo(temp);
}

void modifyAddFour(uint32_t* val) {
    modifyAddTwo(val);
    modifyAddTwo(val);
}

// Multiple parameters through chain
uint32_t sumThree(uint32_t a, uint32_t b, uint32_t c) {
    return a + b + c;
}

uint32_t sumSix(uint32_t a, uint32_t b, uint32_t c, uint32_t d, uint32_t e, uint32_t f) {
    uint32_t first = sumThree(a, b, c);
    uint32_t second = sumThree(d, e, f);
    return first + second;
}

// Mixed modification through chain
void incrementBoth(uint32_t* x, uint32_t* y) {
    modifyAddOne(x);
    modifyAddOne(y);
}

int main(void) {
    uint32_t val = 10U;
    uint32_t result = addOne(val);
    if (val != 10) return 1;
    if (result != 11) return 2;
    result = addTwo(val);
    if (val != 10) return 3;
    if (result != 12) return 4;
    result = addFour(val);
    if (val != 10) return 5;
    if (result != 14) return 6;
    uint32_t modVal = 100U;
    modifyAddOne(&modVal);
    if (modVal != 101) return 7;
    modVal = 100U;
    modifyAddTwo(&modVal);
    if (modVal != 102) return 8;
    modVal = 100U;
    modifyAddFour(&modVal);
    if (modVal != 104) return 9;
    uint32_t mixedVal = 50U;
    result = mixedChain(&mixedVal);
    if (mixedVal != 51) return 10;
    if (result != 102) return 11;
    result = sumThree(1U, 2U, 3U);
    if (result != 6) return 12;
    result = sumSix(1U, 2U, 3U, 4U, 5U, 6U);
    if (result != 21) return 13;
    uint32_t x = 10U;
    uint32_t y = 20U;
    incrementBoth(&x, &y);
    if (x != 11) return 14;
    if (y != 21) return 15;
    return 0;
}
