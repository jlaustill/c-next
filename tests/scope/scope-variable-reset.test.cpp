/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include "scope-variable-reset.test.hpp"

#include <stdint.h>

// test-execution
// Tests: Issue #233 - Scope variables persist like C static variables
//
// This test verifies that scope variables are initialized once at program start
// and persist across all function calls, just like C static variables.
/* Scope: Calculator */
static uint32_t Calculator_operationCount = 0;

uint32_t Calculator_addAndCount(uint32_t value) {
    uint32_t accumulator = 0U;
    accumulator = accumulator + value;
    Calculator_operationCount = Calculator_operationCount + 1U;
    return accumulator;
}

uint32_t Calculator_getOperationCount(void) {
    return Calculator_operationCount;
}

int main(void) {
    uint32_t result1 = Calculator_addAndCount(10U);
    if (result1 != 10) return 1;
    uint32_t count1 = Calculator_getOperationCount();
    if (count1 != 1) return 2;
    uint32_t result2 = Calculator_addAndCount(5U);
    if (result2 != 5) return 3;
    uint32_t count2 = Calculator_getOperationCount();
    if (count2 != 2) return 4;
    uint32_t result3 = Calculator_addAndCount(7U);
    if (result3 != 7) return 5;
    uint32_t count3 = Calculator_getOperationCount();
    if (count3 != 3) return 6;
    return 0;
}
