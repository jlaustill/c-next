// ADR-050: Critical section with conditional
// Tests: if/else inside critical section
u32 counter <- 0;

u32 overflows <- 0;

void safeIncrement() {
    critical {
        if (counter < 1000) {
            counter +<- 1;
        } else {
            overflows +<- 1;
            counter <- 0;
        }
    }
}
