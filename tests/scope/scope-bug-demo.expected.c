/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include "scope-bug-demo.test.h"

#include <stdint.h>

// test-execution
// Test: Scope member shadowing works correctly (ADR-016)
// The scope member 'count' should shadow the global 'count'
uint8_t globalCount = 0;

// Global
extern const uint8_t limit = 10;

// Global const
/* Scope: Counter */
static uint8_t Counter_count = 0;

void Counter_increment(void) {
    Counter_count = Counter_count + 1;
}

uint8_t Counter_getCount(void) {
    return Counter_count;
}

int main(void) {
    uint8_t val = Counter_getCount();
    if (val != 0) return 1;
    Counter_increment();
    val = Counter_getCount();
    if (val != 1) return 2;
    Counter_increment();
    val = Counter_getCount();
    if (val != 2) return 3;
    if (globalCount != 0) return 4;
    return 0;
}
