// test-execution
// Tests .byte_length property for bitmap types (ADR-058)
// bitmap8 = 1 byte, bitmap16 = 2 bytes, bitmap32 = 4 bytes

bitmap8 Flags8 {
    Active,
    Ready,
    Error,
    Reserved[5]
}

bitmap16 Flags16 {
    Mode[4],
    Status[4],
    Counter[8]
}

bitmap32 Flags32 {
    ID[16],
    Version[8],
    Type[8]
}

Flags8 global8 <- 0;
Flags16 global16 <- 0;
Flags32 global32 <- 0;

i32 main() {
    // Test bitmap8 byte_length = 1
    if (global8.byte_length != 1) {
        return 1;
    }

    // Test bitmap16 byte_length = 2
    if (global16.byte_length != 2) {
        return 2;
    }

    // Test bitmap32 byte_length = 4
    if (global32.byte_length != 4) {
        return 3;
    }

    // Test local bitmaps
    Flags8 local8 <- 0;
    if (local8.byte_length != 1) {
        return 4;
    }

    Flags16 local16 <- 0;
    if (local16.byte_length != 2) {
        return 5;
    }

    Flags32 local32 <- 0;
    if (local32.byte_length != 4) {
        return 6;
    }

    return 0;
}
