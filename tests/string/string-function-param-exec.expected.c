/**
 * Generated by C-Next Transpiler from: string-function-param-exec.test.cnx
 * A safer C for embedded systems
 */

#include <stdint.h>
#include <stdbool.h>
#include <string.h>

// test-execution
// ADR-045: Validate string function parameters at runtime
uint32_t getLen(const char* s) {
    return strlen(s);
}

uint32_t getCap(const char* s) {
    return 64;
}

bool isEqual(const char* a, const char* b) {
    return strcmp(a, b) == 0;
}

bool matchesLiteral(const char* s, const char* lit) {
    return strcmp(s, lit) == 0;
}

int main(void) {
    char test[65] = "Hello";
    uint32_t len1 = getLen(&test);
    if (len1 != 5) return 1;
    uint32_t len2 = getLen("World");
    if (len2 != 5) return 2;
    uint32_t len3 = getLen("");
    if (len3 != 0) return 3;
    uint32_t cap1 = getCap(&test);
    if (cap1 != 64) return 4;
    uint32_t cap2 = getCap("Hi");
    if (cap2 != 64) return 5;
    char same[65] = "Hello";
    bool eq1 = isEqual(&test, &same);
    if (!eq1) return 6;
    bool eq2 = isEqual(&test, "Hello");
    if (!eq2) return 7;
    char diff[65] = "World";
    bool eq3 = isEqual(&test, &diff);
    if (eq3) return 8;
    bool match1 = matchesLiteral(&test, "Hello");
    if (!match1) return 9;
    bool match2 = matchesLiteral(&test, "World");
    if (match2) return 10;
    char empty[65] = "";
    uint32_t emptyLen = getLen(&empty);
    if (emptyLen != 0) return 11;
    bool emptyEq = isEqual(&empty, "");
    if (!emptyEq) return 12;
    char longer[65] = "This is a longer string";
    uint32_t longerLen = getLen(&longer);
    if (longerLen != 23) return 13;
    bool longerMatch = matchesLiteral(&longer, "This is a longer string");
    if (!longerMatch) return 14;
    return 0;
}
