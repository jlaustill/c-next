// test-execution
// test-coverage: 30a-global-volatile
// Tests: Global volatile variable declaration and access
// ADR-108: Volatile keyword for optimization prevention
// Global volatile variable - prevents compiler from caching value
volatile u32 status_flag <- 0;

volatile u8 byte_flag <- 0;

volatile bool ready_flag <- false;

u32 main() {
   
// Test 1: Write to volatile global
    status_flag <- 0x12345678;
    if (status_flag != 0x12345678) return 1;

   
// Test 2: Multiple writes
    status_flag <- 100;
    status_flag <- 200;
    status_flag <- 300;
    if (status_flag != 300) return 2;

   
// Test 3: Read from volatile (use different value to avoid cppcheck false positive)
    status_flag <- 500;
    u32 value <- status_flag;
    if (value != 500) return 3;

   
// Test 4: Volatile u8
    byte_flag <- 255;
    if (byte_flag != 255) return 4;

   
// Test 5: Volatile bool
    ready_flag <- true;
    if (ready_flag != true) return 5;

    ready_flag <- false;
    if (ready_flag != false) return 6;

   
// Test 6: Arithmetic on volatile
    status_flag <- 10;
    status_flag +<- 5;
    if (status_flag != 15) return 7;

    return 0; // All tests passed
}
