/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include <stdint.h>
#include <stdbool.h>

// ADR-051: Safe division helper functions
#include <stdbool.h>

static inline bool cnx_safe_div_u32(uint32_t* output, uint32_t numerator, uint32_t divisor, uint32_t defaultValue) {
    if (divisor == 0) {
        *output = defaultValue;
        return true;  // Error occurred
    }
    *output = numerator / divisor;
    return false;  // Success
}

// ADR-051: Basic safe division tests
// Tests the safe_div() built-in function with valid and zero divisors
void testSafeDivBasic(void) {
    uint32_t result = 0;
    bool err = false;
    err = cnx_safe_div_u32(&result, 10, 2, 0);
    result = 100;
    err = cnx_safe_div_u32(&result, 10, 0, 99);
    result = 42;
    err = cnx_safe_div_u32(&result, 10, 0, result);
}

void testSafeDivEdgeCases(void) {
    uint32_t result = 0;
    bool err = false;
    err = cnx_safe_div_u32(&result, 0, 5, 999);
    err = cnx_safe_div_u32(&result, 42, 1, 0);
    err = cnx_safe_div_u32(&result, 1000000, 1000, 0);
}
