// test-execution
// Tests: f64 to u16 cast should clamp values to 0-65535 range
// Issue #632: Float casts must clamp

u32 main() {
    f64 over <- 70000.0;
    f64 negative <- -100.0;
    f64 in_range <- 30000.0;
    f64 at_max <- 65535.0;

    // Test overflow clamping
    u16 result <- (u16)over;
    if (result != 65535) return 1;  // 70000.0 should clamp to 65535

    // Test underflow clamping
    result <- (u16)negative;
    if (result != 0) return 2;  // -100.0 should clamp to 0

    // Test in-range value
    result <- (u16)in_range;
    if (result != 30000) return 3;  // 30000.0 -> 30000

    // Test max boundary
    result <- (u16)at_max;
    if (result != 65535) return 4;  // 65535.0 -> 65535

    return 0;
}
