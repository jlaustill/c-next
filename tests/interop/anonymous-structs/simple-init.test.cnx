// test-cpp-only
// test-execution
// Test: Simple anonymous struct field initialization (issue #882)
#include "anon_types.h"

i32 main() {
    // Test 1: Basic anonymous struct field init
    SimpleConfig cfg <- {
        value: 42,
        flags: { flag_a: 1, flag_b: 0, reserved: 0 }
    };

    if (cfg.value != 42) return 1;
    if (cfg.flags.flag_a != 1) return 2;
    if (cfg.flags.flag_b != 0) return 3;

    // Test 2: Partial init of anonymous struct
    SimpleConfig cfg2 <- {
        value: 100,
        flags: { flag_a: 1 }
    };

    if (cfg2.value != 100) return 4;
    if (cfg2.flags.flag_a != 1) return 5;

    return 0;
}
