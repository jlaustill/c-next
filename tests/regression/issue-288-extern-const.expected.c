/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include "issue-288-extern-const.test.h"

#include <stdint.h>
#include <stdbool.h>

/* test-execution */
// Tests: Issue #288 - extern declarations must include const qualifier for public const variables
// Bug: Header generates "extern uint8_t X;" but impl has "const uint8_t X = value;"
// This causes C++ compilation errors due to conflicting declarations
//
// The .test.h file contains a C++14 typed enum to force g++ compilation,
// which is stricter about const mismatches between declaration and definition.
/* Scope: ExternConstTest */
const uint8_t ExternConstTest_STATUS_OK = 0;
const uint8_t ExternConstTest_STATUS_ERROR = 1;
const uint32_t ExternConstTest_MAGIC_NUMBER = 0xCAFEBABE;

bool ExternConstTest_isSuccess(uint8_t status) {
    if (status == ExternConstTest_STATUS_OK) {
        return true;
    }
    return false;
}

uint8_t ExternConstTest_getErrorCode(void) {
    return ExternConstTest_STATUS_ERROR;
}

uint32_t ExternConstTest_getMagic(void) {
    return ExternConstTest_MAGIC_NUMBER;
}

int main(void) {
    if (ExternConstTest_STATUS_OK != 0) return 1;
    if (ExternConstTest_STATUS_ERROR != 1) return 2;
    if (ExternConstTest_MAGIC_NUMBER != 0xCAFEBABE) return 3;
    bool success = ExternConstTest_isSuccess(0);
    if (success != true) return 4;
    uint8_t errCode = ExternConstTest_getErrorCode();
    if (errCode != 1) return 5;
    uint32_t magic = ExternConstTest_getMagic();
    if (magic != 0xCAFEBABE) return 6;
    return 0;
}
