// test-execution
// Test: ADR-016 global. accessor with all primitive types
// Verifies that global. works correctly with every C-Next primitive type inside scope methods

// Unsigned integer globals
u8 globalU8 <- 255;
u16 globalU16 <- 65535;
u32 globalU32 <- 4294967295;
u64 globalU64 <- 18446744073709551615;

// Signed integer globals
i8 globalI8 <- -128;
i16 globalI16 <- -32768;
i32 globalI32 <- -2147483648;
i64 globalI64 <- -9223372036854775808;

// Floating point globals
f32 globalF32 <- 3.14;
f64 globalF64 <- 3.141592653589793;

// Boolean global
bool globalBool <- true;

scope GlobalAccessTest {
    // Getters using global. accessor - Unsigned integers
    public u8 getGlobalU8() {
        return global.globalU8;
    }

    public u16 getGlobalU16() {
        return global.globalU16;
    }

    public u32 getGlobalU32() {
        return global.globalU32;
    }

    public u64 getGlobalU64() {
        return global.globalU64;
    }

    // Getters using global. accessor - Signed integers
    public i8 getGlobalI8() {
        return global.globalI8;
    }

    public i16 getGlobalI16() {
        return global.globalI16;
    }

    public i32 getGlobalI32() {
        return global.globalI32;
    }

    public i64 getGlobalI64() {
        return global.globalI64;
    }

    // Getters using global. accessor - Floating point
    public f32 getGlobalF32() {
        return global.globalF32;
    }

    public f64 getGlobalF64() {
        return global.globalF64;
    }

    // Getter using global. accessor - Boolean
    public bool getGlobalBool() {
        return global.globalBool;
    }

    // Setters using global. accessor to test assignment
    public void setGlobalU8(u8 val) {
        global.globalU8 <- val;
    }

    public void setGlobalBool(bool val) {
        global.globalBool <- val;
    }

    public void setGlobalF32(f32 val) {
        global.globalF32 <- val;
    }

    public void setGlobalF64(f64 val) {
        global.globalF64 <- val;
    }
}

i32 main() {

// Test all getter methods using global. accessor - verify returned values
    // Each validation uses a unique error code for debugging

    // Unsigned integers
    u8 resultU8 <- GlobalAccessTest.getGlobalU8();
    if (resultU8 != 255) {
        return 1;
    }
    u16 resultU16 <- GlobalAccessTest.getGlobalU16();
    if (resultU16 != 65535) {
        return 2;
    }
    u32 resultU32 <- GlobalAccessTest.getGlobalU32();
    if (resultU32 != 4294967295) {
        return 3;
    }
    u64 resultU64 <- GlobalAccessTest.getGlobalU64();
    if (resultU64 != 18446744073709551615) {
        return 4;
    }

    // Signed integers
    i8 resultI8 <- GlobalAccessTest.getGlobalI8();
    if (resultI8 != -128) {
        return 5;
    }
    i16 resultI16 <- GlobalAccessTest.getGlobalI16();
    if (resultI16 != -32768) {
        return 6;
    }
    i32 resultI32 <- GlobalAccessTest.getGlobalI32();
    if (resultI32 != -2147483648) {
        return 7;
    }
    i64 resultI64 <- GlobalAccessTest.getGlobalI64();
    if (resultI64 != -9223372036854775808) {
        return 8;
    }

    // Floating point - test via setter/getter roundtrip to avoid literal comparison issues
    // Direct comparison of float to double literals has precision issues (see Issue #26)
    f32 testF32 <- 99.5;
    GlobalAccessTest.setGlobalF32(testF32);
    f32 resultF32 <- GlobalAccessTest.getGlobalF32();
    if (resultF32 != testF32) {
        return 9;
    }

    f64 testF64 <- 123.456789012345;
    GlobalAccessTest.setGlobalF64(testF64);
    f64 resultF64 <- GlobalAccessTest.getGlobalF64();
    if (resultF64 != testF64) {
        return 10;
    }

    // Boolean
    bool resultBool <- GlobalAccessTest.getGlobalBool();
    if (resultBool != true) {
        return 11;
    }


// Test setters - modify and verify
    u8 newU8Value <- 100;
    GlobalAccessTest.setGlobalU8(newU8Value);
    u8 resultU8_2 <- GlobalAccessTest.getGlobalU8();
    if (resultU8_2 != 100) {
        return 12;
    }

    bool newBoolValue <- false;
    GlobalAccessTest.setGlobalBool(newBoolValue);
    bool resultBool2 <- GlobalAccessTest.getGlobalBool();
    if (resultBool2 != false) {
        return 13;
    }

    // All tests passed (13 validations total)
    return 0;
}
