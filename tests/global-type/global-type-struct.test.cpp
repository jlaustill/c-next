/**
 * Generated by C-Next Transpiler from: global-type-struct.test.cnx
 * A safer C for embedded systems
 */

#include "global-type-struct.test.hpp"

#include <stdint.h>

// test-execution
// Tests: global.StructType for struct types inside scope
// Issue #478: global.EnumType not recognized as type reference inside scope
// Define struct in same file to avoid cross-file header conflicts
/* Scope: PointManager */
static Point2D PointManager_point = {0};

void PointManager_setPoint(int32_t px, int32_t py) {
    PointManager_point.x = px;
    PointManager_point.y = py;
}

int32_t PointManager_getX(void) {
    return PointManager_point.x;
}

int32_t PointManager_getY(void) {
    return PointManager_point.y;
}

Point2D PointManager_getPoint(void) {
    return PointManager_point;
}

int32_t PointManager_sum(const Point2D& p) {
    return p.x + p.y;
}

int main(void) {
    PointManager_setPoint(10, 20);
    int32_t x = PointManager_getX();
    int32_t y = PointManager_getY();
    if (x != 10) return 1;
    if (y != 20) return 2;
    Point2D p = PointManager_getPoint();
    if (p.x != 10) return 3;
    if (p.y != 20) return 4;
    int32_t total = PointManager_sum(p);
    if (total != 30) return 5;
    return 0;
}
