/**
 * Generated by C-Next Transpiler from: crossfile-enum-valid.test.cnx
 * A safer C for embedded systems
 */

// test-execution
// Tests: Cross-file unqualified enum SHOULD work when return type is the enum
#include "cross-file-types.h"

#include <stdint.h>

// Valid: return type IS ESpnCategory - unqualified enum should work
ESpnCategory getCategory(uint16_t spn) {
    if (spn == 100) {
        return ESpnCategory_SPN_CAT_PRESSURE;
    }
    return ESpnCategory_SPN_CAT_UNKNOWN;
}

// Valid: switch on enum type with unqualified case labels
uint32_t categoryToValue(ESpnCategory cat) {
    switch (cat) {
        case ESpnCategory_SPN_CAT_TEMPERATURE: {
            return 0;
            break;
        }
        case ESpnCategory_SPN_CAT_PRESSURE: {
            return 1;
            break;
        }
        case ESpnCategory_SPN_CAT_UNKNOWN: {
            return 2;
            break;
        }
        default: {
            break;
        }
    }
    return 99;
}

int main(void) {
    ESpnCategory cat = getCategory(100U);
    if (cat != ESpnCategory_SPN_CAT_PRESSURE) return 1;
    cat = getCategory(0U);
    if (cat != ESpnCategory_SPN_CAT_UNKNOWN) return 2;
    uint32_t val1 = categoryToValue(ESpnCategory_SPN_CAT_TEMPERATURE);
    if (val1 != 0) return 3;
    uint32_t val2 = categoryToValue(ESpnCategory_SPN_CAT_PRESSURE);
    if (val2 != 1) return 4;
    uint32_t val3 = categoryToValue(ESpnCategory_SPN_CAT_UNKNOWN);
    if (val3 != 2) return 5;
    return 0;
}
