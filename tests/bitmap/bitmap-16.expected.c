/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include <stdint.h>
#include <stdbool.h>

// ADR-034: 16-bit Bitmap Test
// Tests larger bitmap with various field sizes
/* Bitmap: CANStatus */
/* Fields:
 *   Ready: bit 0 (1 bit)
 *   Error: bit 1 (1 bit)
 *   TxEmpty: bit 2 (1 bit)
 *   RxFull: bit 3 (1 bit)
 *   BusOff: bit 4 (1 bit)
 *   ErrorPassive: bit 5 (1 bit)
 *   Warning: bit 6 (1 bit)
 *   Overrun: bit 7 (1 bit)
 *   MessageCounter: bits 8-15 (8 bits)
 */
typedef uint16_t CANStatus;

CANStatus status = 0;

int main(void) {
    status = (status & ~(1 << 0)) | (1 << 0);
    status = (status & ~(1 << 1)) | (0 << 1);
    status = (status & ~(0xFF << 8)) | ((255 & 0xFF) << 8);
    bool isReady = ((status >> 0) & 1);
    uint8_t count = ((status >> 8) & 0xFF);
    status = (status & ~(0xFF << 8)) | ((128 & 0xFF) << 8);
}
