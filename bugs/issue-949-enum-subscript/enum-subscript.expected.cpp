/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include "enum-subscript.test.hpp"

#include <stdint.h>

// test-execution
// Bug #949: E0852 incorrectly rejects enum type as array subscript index
TValue values[4] = {0};

/* Scope: Test */

uint32_t Test_getValue(EColor color) {
    return values[color].data;
}

void Test_setValue(EColor color, uint32_t val) {
    values[color].data = val;
}

int main(void) {
    Test_setValue(EColor_GREEN, 42U);
    uint32_t result = Test_getValue(EColor_GREEN);
    if (result != 42) return 1;
    Test_setValue(EColor_RED, 10U);
    uint32_t redVal = Test_getValue(EColor_RED);
    if (redVal != 10) return 2;
    Test_setValue(EColor_BLUE, 99U);
    uint32_t blueVal = Test_getValue(EColor_BLUE);
    if (blueVal != 99) return 3;
    return 0;
}
