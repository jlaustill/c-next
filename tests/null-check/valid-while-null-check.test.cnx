// ADR-046: While loop condition provides NULL check
// Tests that c_ variables checked in while condition are checked inside body
#include <stdio.h>

string<256> line;
bool keepReading <- true;

void testWhileNullCheck() {
    FILE c_file <- fopen("data.txt", "r");

    // While condition checks for NULL - c_file is checked inside body
    while (c_file != NULL) {
        // OK: c_file is NULL-checked by while condition
        fclose(c_file);  // OK - checked by while condition
        printf("File was open\n");
        // Re-assign to exit loop (when file doesn't exist, fopen returns NULL)
        c_file <- fopen("nonexistent.txt", "r");
    }
}
