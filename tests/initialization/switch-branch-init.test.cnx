/* test-coverage: 26-switch-branch-init */
/* test-execution */
// Tests: Variable initialization in switch case branches

enum Mode {
    OFF <- 0,
    LOW <- 1,
    MEDIUM <- 2,
    HIGH <- 3
}

u32 calculatePower(Mode mode) {
    u32 power <- 0;

    switch (mode) {
        case Mode.OFF: {
            u32 offValue <- 0;  // Init in case block
            power <- offValue;
        }
        case Mode.LOW: {
            u32 lowValue <- 10;  // Different init in different case
            power <- lowValue;
        }
        case Mode.MEDIUM: {
            u32 medValue <- 50;
            power <- medValue;
        }
        case Mode.HIGH: {
            u32 highValue <- 100;
            power <- highValue;
        }
        default: {
            u32 defaultValue <- 25;
            power <- defaultValue;
        }
    }

    return power;
}

u32 main() {
    if (calculatePower(Mode.OFF) != 0) return 1;
    if (calculatePower(Mode.LOW) != 10) return 2;
    if (calculatePower(Mode.MEDIUM) != 50) return 3;
    if (calculatePower(Mode.HIGH) != 100) return 4;

    return 0;
}
