/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include <stdint.h>

// test-execution
// Tests: Issue #368 - Array parameter element assignment
// When assigning to an array element via function parameter (data[0] <- value),
// the transpiler should generate array access, not bit manipulation.
// Function that writes to array element by index - sized parameter
void writeAt(uint8_t arr[8], uint32_t index, uint8_t value) {
    arr[index] = value;
}

// Function that writes to first element with literal index
void writeFirst(uint8_t data[8], uint8_t value) {
    data[0] = value;
}

// Function that reads and writes array elements
void copyElement(const uint8_t src[4], uint8_t dst[4], uint32_t index) {
    dst[index] = src[index];
}

int main(void) {
    uint8_t buffer[8] = {0};
    buffer[0] = 0U;
    buffer[1] = 0U;
    writeAt(buffer, 0, 42);
    if (buffer[0] != 42) return 1;
    writeAt(buffer, 1, 99);
    if (buffer[1] != 99) return 2;
    writeFirst(buffer, 123);
    if (buffer[0] != 123) return 3;
    uint8_t source[4] = {0};
    uint8_t dest[4] = {0};
    source[0] = 0U;
    source[1] = 0U;
    source[2] = 0U;
    source[3] = 0U;
    dest[0] = 0U;
    dest[1] = 0U;
    dest[2] = 0U;
    dest[3] = 0U;
    source[2] = 200U;
    copyElement(source, dest, 2);
    if (dest[2] != 200) return 4;
    return 0;
}
