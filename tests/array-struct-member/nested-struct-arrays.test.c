/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include <stdint.h>

// test-execution
// Tests: Nested structs containing array members
// Coverage: Array access through nested struct paths
typedef struct Coordinate {
    int32_t x;
    int32_t y;
} Coordinate;

typedef struct Path {
    Coordinate points[4];
    uint32_t count;
} Path;

typedef struct Route {
    Path segments[2];
    uint32_t totalSegments;
} Route;

int main(void) {
    Path path = {0};
    path.count = 3;
    path.points[0].x = 0;
    path.points[0].y = 0;
    path.points[1].x = 10;
    path.points[1].y = 20;
    path.points[2].x = 30;
    path.points[2].y = 40;
    if (path.count != 3) return 1;
    if (path.points[0].x != 0) return 2;
    if (path.points[0].y != 0) return 3;
    if (path.points[1].x != 10) return 4;
    if (path.points[1].y != 20) return 5;
    if (path.points[2].x != 30) return 6;
    if (path.points[2].y != 40) return 7;
    Route route = {0};
    route.totalSegments = 2;
    route.segments[0].count = 2;
    route.segments[0].points[0].x = 100;
    route.segments[0].points[0].y = 100;
    route.segments[0].points[1].x = 150;
    route.segments[0].points[1].y = 150;
    route.segments[1].count = 2;
    route.segments[1].points[0].x = 200;
    route.segments[1].points[0].y = 200;
    route.segments[1].points[1].x = 250;
    route.segments[1].points[1].y = 250;
    if (route.totalSegments != 2) return 8;
    if (route.segments[0].count != 2) return 9;
    if (route.segments[0].points[0].x != 100) return 10;
    if (route.segments[0].points[1].y != 150) return 11;
    if (route.segments[1].points[0].x != 200) return 12;
    if (route.segments[1].points[1].y != 250) return 13;
    uint32_t segIdx = 1;
    uint32_t ptIdx = 0;
    if (route.segments[segIdx].points[ptIdx].x != 200) return 14;
    route.segments[0].points[0].x += 50;
    if (route.segments[0].points[0].x != 150) return 15;
    return 0;
}
