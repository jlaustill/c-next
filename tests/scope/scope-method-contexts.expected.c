/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include <stdint.h>
#include <stdbool.h>

// ADR-044: Overflow helper functions
#include <limits.h>

static inline uint16_t cnx_clamp_add_u16(uint16_t a, uint32_t b) {
    if (b > UINT16_MAX - a) return UINT16_MAX;
    return a + (uint16_t)b;
}

static inline uint8_t cnx_clamp_add_u8(uint8_t a, uint32_t b) {
    if (b > UINT8_MAX - a) return UINT8_MAX;
    return a + (uint8_t)b;
}

/* test-execution */
// Test: ADR-016 Modifiers in public and private method contexts
// Verifies that this. and global. accessors work correctly in all method contexts
// Tests: public methods, private methods, local variables with modifiers, combined access patterns
// Global variables for testing global. accessor in all method contexts
const uint8_t GLOBAL_MAX = 100;

const uint16_t GLOBAL_THRESHOLD = 1000;

uint8_t globalCounter = 50;

bool globalEnabled = true;

int16_t globalOffset = -25;

float globalScale = 2.5;

/* Scope: MethodContexts */
static uint8_t MethodContexts_privateValue = 10;
static uint8_t MethodContexts_privateClampValue = 200;
static uint8_t MethodContexts_privateWrapValue = 250;
static bool MethodContexts_privateFlag = false;
static int16_t MethodContexts_privateOffset = -50;
uint8_t MethodContexts_publicValue = 20;
uint16_t MethodContexts_publicClampValue = 60000;
uint16_t MethodContexts_publicWrapValue = 65530;
bool MethodContexts_publicFlag = true;
int32_t MethodContexts_publicOffset = -1000;

static uint8_t MethodContexts_getPrivateValue(void) {
    return MethodContexts_privateValue;
}

static uint8_t MethodContexts_getPublicValueInternal(void) {
    return MethodContexts_publicValue;
}

static uint8_t MethodContexts_getPrivateClampValue(void) {
    return MethodContexts_privateClampValue;
}

static uint8_t MethodContexts_getPrivateWrapValue(void) {
    return MethodContexts_privateWrapValue;
}

static void MethodContexts_incrementPrivateClamp(void) {
    MethodContexts_privateClampValue = cnx_clamp_add_u8(MethodContexts_privateClampValue, 100);
}

static void MethodContexts_incrementPrivateWrap(void) {
    MethodContexts_privateWrapValue += 10;
}

static bool MethodContexts_getPrivateFlag(void) {
    return MethodContexts_privateFlag;
}

static int16_t MethodContexts_getPrivateOffset(void) {
    return MethodContexts_privateOffset;
}

static uint8_t MethodContexts_getGlobalMaxInternal(void) {
    return GLOBAL_MAX;
}

static uint8_t MethodContexts_getGlobalCounterInternal(void) {
    return globalCounter;
}

static bool MethodContexts_getGlobalEnabledInternal(void) {
    return globalEnabled;
}

static int16_t MethodContexts_getGlobalOffsetInternal(void) {
    return globalOffset;
}

static float MethodContexts_getGlobalScaleInternal(void) {
    return globalScale;
}

static uint8_t MethodContexts_computePrivateSum(void) {
    return MethodContexts_privateValue + globalCounter;
}

static bool MethodContexts_privateValueBelowMax(void) {
    return MethodContexts_privateValue < GLOBAL_MAX;
}

static int16_t MethodContexts_computePrivateWithOffset(void) {
    return MethodContexts_privateOffset + globalOffset;
}

uint8_t MethodContexts_getPrivateValueExternal(void) {
    return MethodContexts_privateValue;
}

uint8_t MethodContexts_getPublicValue(void) {
    return MethodContexts_publicValue;
}

uint16_t MethodContexts_getPublicClampValue(void) {
    return MethodContexts_publicClampValue;
}

uint16_t MethodContexts_getPublicWrapValue(void) {
    return MethodContexts_publicWrapValue;
}

void MethodContexts_incrementPublicClamp(void) {
    MethodContexts_publicClampValue = cnx_clamp_add_u16(MethodContexts_publicClampValue, 10000);
}

void MethodContexts_incrementPublicWrap(void) {
    MethodContexts_publicWrapValue += 10;
}

bool MethodContexts_getPublicFlag(void) {
    return MethodContexts_publicFlag;
}

int32_t MethodContexts_getPublicOffset(void) {
    return MethodContexts_publicOffset;
}

void MethodContexts_setPrivateValue(uint8_t* val) {
    MethodContexts_privateValue = (*val);
}

void MethodContexts_setPublicValue(uint8_t* val) {
    MethodContexts_publicValue = (*val);
}

void MethodContexts_setPrivateFlag(bool* val) {
    MethodContexts_privateFlag = (*val);
}

void MethodContexts_setPublicFlag(bool* val) {
    MethodContexts_publicFlag = (*val);
}

uint8_t MethodContexts_getGlobalMax(void) {
    return GLOBAL_MAX;
}

uint16_t MethodContexts_getGlobalThreshold(void) {
    return GLOBAL_THRESHOLD;
}

uint8_t MethodContexts_getGlobalCounter(void) {
    return globalCounter;
}

bool MethodContexts_getGlobalEnabled(void) {
    return globalEnabled;
}

int16_t MethodContexts_getGlobalOffset(void) {
    return globalOffset;
}

float MethodContexts_getGlobalScale(void) {
    return globalScale;
}

uint8_t MethodContexts_computePublicSum(void) {
    return MethodContexts_publicValue + globalCounter;
}

bool MethodContexts_publicValueBelowMax(void) {
    return MethodContexts_publicValue < GLOBAL_MAX;
}

int32_t MethodContexts_computePublicWithOffset(void) {
    return MethodContexts_publicOffset + globalOffset;
}

uint8_t MethodContexts_getPrivateSumViaInternal(void) {
    return MethodContexts_computePrivateSum();
}

uint8_t MethodContexts_getGlobalCounterViaInternal(void) {
    return MethodContexts_getGlobalCounterInternal();
}

uint8_t MethodContexts_getPrivateClampViaInternal(void) {
    return MethodContexts_getPrivateClampValue();
}

void MethodContexts_modifyAllPrivate(void) {
    MethodContexts_privateValue = MethodContexts_privateValue + 1;
    MethodContexts_privateClampValue = cnx_clamp_add_u8(MethodContexts_privateClampValue, 10);
    MethodContexts_privateWrapValue += 5;
    MethodContexts_privateFlag = !MethodContexts_privateFlag;
    MethodContexts_privateOffset = MethodContexts_privateOffset - 10;
}

void MethodContexts_modifyAllPublic(void) {
    MethodContexts_publicValue = MethodContexts_publicValue + 1;
    MethodContexts_publicClampValue = cnx_clamp_add_u16(MethodContexts_publicClampValue, 100);
    MethodContexts_publicWrapValue += 5;
    MethodContexts_publicFlag = !MethodContexts_publicFlag;
    MethodContexts_publicOffset = MethodContexts_publicOffset - 100;
}

bool MethodContexts_checkThresholds(void) {
    return MethodContexts_publicClampValue < GLOBAL_THRESHOLD && MethodContexts_privateValue < GLOBAL_MAX;
}

bool MethodContexts_getAllFlags(void) {
    return MethodContexts_privateFlag && MethodContexts_publicFlag && globalEnabled;
}

int main(void) {
    if (MethodContexts_getPrivateValueExternal() != 10) return 1;
    if (MethodContexts_getPrivateSumViaInternal() != 60) return 2;
    if (MethodContexts_getGlobalCounterViaInternal() != 50) return 3;
    if (MethodContexts_getPrivateClampViaInternal() != 200) return 4;
    if (MethodContexts_getPublicValue() != 20) return 5;
    if (MethodContexts_getPublicClampValue() != 60000) return 6;
    if (MethodContexts_getPublicWrapValue() != 65530) return 7;
    if (MethodContexts_getPublicFlag() != true) return 8;
    if (MethodContexts_getPublicOffset() != -1000) return 9;
    if (MethodContexts_getGlobalMax() != 100) return 10;
    if (MethodContexts_getGlobalThreshold() != 1000) return 11;
    if (MethodContexts_getGlobalCounter() != 50) return 12;
    if (MethodContexts_getGlobalEnabled() != true) return 13;
    if (MethodContexts_getGlobalOffset() != -25) return 14;
    float expectedScale = 2.5;
    if (MethodContexts_getGlobalScale() != expectedScale) return 15;
    if (MethodContexts_computePublicSum() != 70) return 16;
    if (MethodContexts_publicValueBelowMax() != true) return 17;
    if (MethodContexts_computePublicWithOffset() != -1025) return 18;
    MethodContexts_setPrivateValue(&(uint8_t){42});
    if (MethodContexts_getPrivateValueExternal() != 42) return 19;
    if (MethodContexts_getPrivateSumViaInternal() != 92) return 20;
    MethodContexts_setPublicValue(&(uint8_t){84});
    if (MethodContexts_getPublicValue() != 84) return 21;
    if (MethodContexts_computePublicSum() != 134) return 22;
    MethodContexts_setPrivateFlag(&(bool){true});
    MethodContexts_setPublicFlag(&(bool){false});
    if (MethodContexts_getPublicFlag() != false) return 24;
    MethodContexts_incrementPublicClamp();
    if (MethodContexts_getPublicClampValue() != 65535) return 25;
    MethodContexts_incrementPublicWrap();
    if (MethodContexts_getPublicWrapValue() != 4) return 26;
    MethodContexts_modifyAllPrivate();
    if (MethodContexts_getPrivateValueExternal() != 43) return 27;
    if (MethodContexts_getPrivateClampViaInternal() != 210) return 28;
    MethodContexts_modifyAllPublic();
    if (MethodContexts_getPublicValue() != 85) return 30;
    if (MethodContexts_getPublicClampValue() != 65535) return 31;
    if (MethodContexts_getPublicWrapValue() != 9) return 32;
    if (MethodContexts_getPublicFlag() != true) return 33;
    if (MethodContexts_getPublicOffset() != -1100) return 34;
    if (MethodContexts_checkThresholds() != false) return 35;
    if (MethodContexts_getAllFlags() != false) return 36;
    if (MethodContexts_publicValue != 85) return 37;
    if (MethodContexts_publicClampValue != 65535) return 38;
    if (MethodContexts_publicWrapValue != 9) return 39;
    if (MethodContexts_publicFlag != true) return 40;
    if (MethodContexts_publicOffset != -1100) return 41;
    MethodContexts_publicValue = 99;
    if (MethodContexts_getPublicValue() != 99) return 42;
    MethodContexts_publicFlag = false;
    if (MethodContexts_getPublicFlag() != false) return 43;
    return 0;
}
