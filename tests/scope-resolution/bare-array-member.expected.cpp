/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include "bare-array-member.test.hpp"

#include <stdint.h>
#include <stdbool.h>

// test-execution
// Test bare array identifier resolves to scope member
// Issue #779: Array member access without this. should still get scope prefix
/* Scope: ArrayBug */
static uint8_t ArrayBug_data[4] = {0, 0, 0, 0};
static bool ArrayBug_flag = false;

void ArrayBug_callback(void) {
    ArrayBug_data[0] = 42;
    ArrayBug_flag = true;
}

uint8_t ArrayBug_getData0(void) {
    return ArrayBug_data[0];
}

bool ArrayBug_getFlag(void) {
    return ArrayBug_flag;
}

int main(void) {
    ArrayBug_callback();
    uint8_t data0 = ArrayBug_getData0();
    bool flag = ArrayBug_getFlag();
    if (data0 != 42) return 1;
    if (flag != true) return 2;
    return 0;
}
