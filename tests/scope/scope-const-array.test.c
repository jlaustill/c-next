/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include "scope-const-array.test.h"

#include <stdint.h>

// test-execution
// Tests: Issue #500 - Private const arrays should be emitted as static const
/* Scope: ArrayTest */
static const uint16_t ArrayTest_VALUES[4] = {10, 20, 30, 40};
static uint8_t ArrayTest_currentIndex = 0;

uint16_t ArrayTest_getValue(void) {
    return ArrayTest_VALUES[ArrayTest_currentIndex];
}

uint16_t ArrayTest_getAt(uint8_t index) {
    return ArrayTest_VALUES[index];
}

void ArrayTest_setIndex(uint8_t index) {
    ArrayTest_currentIndex = index;
}

int main(void) {
    uint16_t val0 = ArrayTest_getAt(0);
    if (val0 != 10) return 1;
    uint16_t val1 = ArrayTest_getAt(1);
    if (val1 != 20) return 2;
    uint16_t val2 = ArrayTest_getAt(2);
    if (val2 != 30) return 3;
    uint16_t val3 = ArrayTest_getAt(3);
    if (val3 != 40) return 4;
    ArrayTest_setIndex(2);
    uint16_t stateful = ArrayTest_getValue();
    if (stateful != 30) return 5;
    return 0;
}
