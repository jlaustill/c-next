/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

// test-transpile-only
// Issue #465: Test multiple external enums from different files
// Verifies that enum prefixing works when including multiple files with enums
#include "types.h"
#include "status.h"

#include <stdint.h>

typedef struct DeviceState {
    EPressureType pressure;
    EStatus status;
} DeviceState;

void configure(DeviceState& state) {
    state.pressure = EPressureType_PRESSURE_TYPE_PSIG;
    state.status = EStatus_STATUS_ACTIVE;
}

int main(void) {
    DeviceState dev = (DeviceState){ .pressure = EPressureType_PRESSURE_TYPE_PSIA, .status = EStatus_STATUS_IDLE };
    if (dev.pressure != EPressureType_PRESSURE_TYPE_PSIA) return 1;
    if (dev.status != EStatus_STATUS_IDLE) return 2;
    configure(dev);
    if (dev.pressure != EPressureType_PRESSURE_TYPE_PSIG) return 3;
    if (dev.status != EStatus_STATUS_ACTIVE) return 4;
    dev.pressure = EPressureType_PRESSURE_TYPE_PSIA;
    dev.status = EStatus_STATUS_ERROR;
    if (dev.pressure != EPressureType_PRESSURE_TYPE_PSIA) return 5;
    if (dev.status != EStatus_STATUS_ERROR) return 6;
    return 0;
}
