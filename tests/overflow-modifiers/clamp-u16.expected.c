/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include <stdint.h>

// ADR-044: Overflow helper functions
#include <limits.h>

static inline uint16_t cnx_clamp_add_u16(uint16_t a, uint32_t b) {
    if (b > UINT16_MAX - a) return UINT16_MAX;
    return a + (uint16_t)b;
}

static inline uint16_t cnx_clamp_sub_u16(uint16_t a, uint32_t b) {
    if (b >= (uint32_t)a) return 0;
    return a - (uint16_t)b;
}

/* test-execution */
// Tests: clamp modifier for u16 type (0 to 65535)
// Validates overflow clamps to 65535, underflow clamps to 0
// ADR-044: Per-variable overflow semantics
int main(void) {
    uint16_t val = 60000;
    val = cnx_clamp_add_u16(val, 10000);
    if (val != 65535) return 1;
    val = 65535;
    val = cnx_clamp_add_u16(val, 1);
    if (val != 65535) return 2;
    val = 50000;
    val = cnx_clamp_add_u16(val, 30000);
    if (val != 65535) return 3;
    val = 1;
    val = cnx_clamp_add_u16(val, 65535);
    if (val != 65535) return 4;
    val = 65000;
    val = cnx_clamp_add_u16(val, 1000);
    if (val != 65535) return 5;
    val = cnx_clamp_add_u16(val, 1000);
    if (val != 65535) return 6;
    val = 5000;
    val = cnx_clamp_sub_u16(val, 10000);
    if (val != 0) return 7;
    val = 0;
    val = cnx_clamp_sub_u16(val, 1);
    if (val != 0) return 8;
    val = 1000;
    val = cnx_clamp_sub_u16(val, 65535);
    if (val != 0) return 9;
    val = 500;
    val = cnx_clamp_sub_u16(val, 1000);
    if (val != 0) return 10;
    val = cnx_clamp_sub_u16(val, 1000);
    if (val != 0) return 11;
    val = 30000;
    val = cnx_clamp_add_u16(val, 20000);
    if (val != 50000) return 12;
    val = 40000;
    val = cnx_clamp_sub_u16(val, 10000);
    if (val != 30000) return 13;
    val = 0;
    val = cnx_clamp_add_u16(val, 32768);
    if (val != 32768) return 14;
    val = 10000;
    val = cnx_clamp_sub_u16(val, 10000);
    if (val != 0) return 15;
    val = 65534;
    val = cnx_clamp_add_u16(val, 1);
    if (val != 65535) return 16;
    val = 1;
    val = cnx_clamp_sub_u16(val, 1);
    if (val != 0) return 17;
    val = 32768;
    val = cnx_clamp_add_u16(val, 0);
    if (val != 32768) return 18;
    val = 32768;
    val = cnx_clamp_sub_u16(val, 0);
    if (val != 32768) return 19;
    val = 60000;
    val = cnx_clamp_add_u16(val, 10000);
    if (val != 65535) return 20;
    val = cnx_clamp_sub_u16(val, 65535);
    if (val != 0) return 21;
    val = 65530;
    val = cnx_clamp_add_u16(val, 2);
    if (val != 65532) return 22;
    val = cnx_clamp_add_u16(val, 2);
    if (val != 65534) return 23;
    val = cnx_clamp_add_u16(val, 2);
    if (val != 65535) return 24;
    val = 5;
    val = cnx_clamp_sub_u16(val, 2);
    if (val != 3) return 25;
    val = cnx_clamp_sub_u16(val, 2);
    if (val != 1) return 26;
    val = cnx_clamp_sub_u16(val, 2);
    if (val != 0) return 27;
    return 0;
}
