// test-execution
// Regression test for issue #68: Real-world serialization pattern
// Verifies config.magic.length correctly returns 32 (was returning 0)
struct Config {
    u32 magic;
    u8 version;
}

u32 main() {
    Config config;
    config.magic <- 0x12345678;
    config.version <- 0x42;

   
// Test byte calculation from .length
    // This was broken: length was 0 instead of 4
    u32 length <- config.magic.length / 8;
    if (length != 4) return 1; // u32 = 32 bits = 4 bytes

   
// Test for u8 field
    // This was broken: length was 0 instead of 1
    length <- config.version.length / 8;
    if (length != 1) return 2; // u8 = 8 bits = 1 byte

   
// Test bit width directly (without division)
    u32 bits <- config.magic.length;
    if (bits != 32) return 3;

    bits <- config.version.length;
    if (bits != 8) return 4;

    return 0; // All tests passed
}
