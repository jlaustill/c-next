/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include "SerialHandler.test.hpp"

// test-cpp-only
// Bug #561: Private function const inference
// handleSet is a PRIVATE function that passes config to CommandHandler.setValue
// which modifies cfg.value. Therefore:
// 1. handleSet's config param should NOT be const (it's passed to a modifying function)
// 2. process's config param should NOT be const (it calls handleSet which transitively modifies)
#include "Config.h"
#include "CommandHandler.h"

#include <stdint.h>

/* Scope: SerialHandler */

static void SerialHandler_handleSet(Config& config) {
    uint8_t result = CommandHandler_setValue(config, 42U);
}

void SerialHandler_process(Config& config) {
    SerialHandler_handleSet(config);
}

int main(void) {
    Config c = (Config){ .value = 0U };
    SerialHandler_process(c);
}
