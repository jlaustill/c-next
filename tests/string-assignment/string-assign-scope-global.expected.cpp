/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include "string-assign-scope-global.test.hpp"

#include <stdint.h>
#include <string.h>

// test-execution
// Issue #139: Test global.member string assignment inside scope (ADR-016)
char globalBuffer[65] = "";

/* Scope: Handler */

void Handler_updateGlobal(void) {
    strncpy(globalBuffer, "FromScope", 64); globalBuffer[64] = '\0';
}

void Handler_clearGlobal(void) {
    strncpy(globalBuffer, "", 64); globalBuffer[64] = '\0';
}

void Handler_setLongMessage(void) {
    strncpy(globalBuffer, "This is a longer message from scope", 64); globalBuffer[64] = '\0';
}

int main(void) {
    Handler_updateGlobal();
    if (strlen(globalBuffer) != 9) return 1;
    Handler_clearGlobal();
    if (strlen(globalBuffer) != 0) return 2;
    Handler_setLongMessage();
    if (strlen(globalBuffer) != 35) return 3;
    return 0;
}
