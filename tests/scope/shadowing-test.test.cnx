// test-execution
// Test: Scope shadowing between global and scope (ADR-016)
// Scope member should shadow global const

const u8 globalFlags <- 0;  // Global const

scope Control {
    u8 flags <- 0b11111111;  // Scope member

    public void setFlag() {
        // Should reference Control.flags, not global
        flags <- 0b10101010;
    }

    public u8 getFlags() {
        return flags;
    }
}

u32 main() {
    // Initially 0xFF
    u8 val <- Control.getFlags();
    if (val != 0b11111111) return 1;

    // setFlag changes scope member
    Control.setFlag();
    val <- Control.getFlags();
    if (val != 0b10101010) return 2;

    // Global should be unchanged (it's const so would error anyway)
    if (globalFlags != 0) return 3;

    return 0;
}
