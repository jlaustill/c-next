// test-c-only
// test-execution
// Tests: cross-file enum comparison (no local variable assignment) (#786 related)

#include "types.cnx"

u32 main() {
    // Initialize
    config.items[0].assigned <- MyEnum.A;
    config.items[1].assigned <- MyEnum.NONE;

    // Direct comparison - does this work without assigning to local var?
    if (config.items[0].assigned != MyEnum.A) return 1;
    if (config.items[1].assigned != MyEnum.NONE) return 2;

    // Comparison in loop
    u8 noneCount <- 0;
    for (u8 i <- 0; i < 2; i +<- 1) {
        if (config.items[i].assigned = MyEnum.NONE) {
            noneCount +<- 1;
        }
    }
    if (noneCount != 1) return 3;

    return 0;
}
