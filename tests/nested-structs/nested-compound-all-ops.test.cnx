// Test: All compound assignment operators on nested struct members
// Covers deeply nested member access with compound assignments
struct Inner {
    u32 add_val;
    u32 sub_val;
    u32 mul_val;
    u32 div_val;
    u32 mod_val;
    u32 and_val;
    u32 or_val;
    u32 xor_val;
    u32 shl_val;
    u32 shr_val;
}

struct Middle {
    Inner inner;
    u32 value;
}

struct Outer {
    Middle middle;
    u32 top_val;
}

Outer o;

i32 main() {
    // Initialize deeply nested struct members
    o.middle.inner.add_val <- 100;
    o.middle.inner.sub_val <- 50;
    o.middle.inner.mul_val <- 10;
    o.middle.inner.div_val <- 100;
    o.middle.inner.mod_val <- 17;
    o.middle.inner.and_val <- 0b11110000;
    o.middle.inner.or_val <- 0b00001111;
    o.middle.inner.xor_val <- 0b10101010;
    o.middle.inner.shl_val <- 8;
    o.middle.inner.shr_val <- 128;

    // Also test middle level
    o.middle.value <- 200;
    o.top_val <- 50;

   
// Test all compound operators on deeply nested struct members
    o.middle.inner.add_val +<- 25; // 100 + 25 = 125
    o.middle.inner.sub_val -<- 15; // 50 - 15 = 35
    o.middle.inner.mul_val *<- 7; // 10 * 7 = 70
    o.middle.inner.div_val /<- 4; // 100 / 4 = 25
    o.middle.inner.mod_val %<- 5; // 17 % 5 = 2
    o.middle.inner.and_val &<- 0b11001100; // 0b11110000 & 0b11001100 = 192
    o.middle.inner.or_val |<- 0b11110000; // 0b00001111 | 0b11110000 = 255
    o.middle.inner.xor_val ^<- 0b11111111; // 0b10101010 ^ 0b11111111 = 85
    o.middle.inner.shl_val <<<- 2; // 8 << 2 = 32
    o.middle.inner.shr_val >><- 3; // 128 >> 3 = 16

    // Also test middle and top level compound assignments
    o.middle.value +<- 100; // 200 + 100 = 300
    o.top_val *<- 3; // 50 * 3 = 150

    // Verify all deeply nested results
    if (o.middle.inner.add_val != 125) {
        return 1;
    }
    if (o.middle.inner.sub_val != 35) {
        return 2;
    }
    if (o.middle.inner.mul_val != 70) {
        return 3;
    }
    if (o.middle.inner.div_val != 25) {
        return 4;
    }
    if (o.middle.inner.mod_val != 2) {
        return 5;
    }
    if (o.middle.inner.and_val != 192) {
        return 6;
    }
    if (o.middle.inner.or_val != 255) {
        return 7;
    }
    if (o.middle.inner.xor_val != 85) {
        return 8;
    }
    if (o.middle.inner.shl_val != 32) {
        return 9;
    }
    if (o.middle.inner.shr_val != 16) {
        return 10;
    }

    // Verify middle and top level
    if (o.middle.value != 300) {
        return 11;
    }
    if (o.top_val != 150) {
        return 12;
    }

    return 0;
}
