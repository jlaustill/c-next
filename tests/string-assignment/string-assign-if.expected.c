/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include <stdint.h>
#include <stdbool.h>
#include <string.h>

/* test-execution */
// Issue #139: Test string assignment inside if/else blocks
char status[33] = "Unknown";

void setStatus(bool* ok) {
    if ((*ok)) {
        strncpy(status, "Success", 32); status[32] = '\0';
    } else {
        strncpy(status, "Failure", 32); status[32] = '\0';
    }
}

void setNested(uint32_t* level) {
    if ((*level) > 0) {
        if ((*level) > 1) {
            strncpy(status, "Nested", 32); status[32] = '\0';
        } else {
            strncpy(status, "Level1", 32); status[32] = '\0';
        }
    }
}

uint32_t main(void) {
    setStatus(&(bool){true});
    if (strlen(status) != 7) return 1;
    setStatus(&(bool){false});
    if (strlen(status) != 7) return 2;
    setNested(&(uint32_t){2});
    if (strlen(status) != 6) return 3;
    setNested(&(uint32_t){1});
    if (strlen(status) != 6) return 4;
    return 0;
}
