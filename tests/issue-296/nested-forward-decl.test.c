/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include "nested-forward-decl.test.h"

// Issue #404: Forward declarations with nested struct types
// test-execution
// Tests that forward declarations work correctly when structs contain
// other structs from external files.
#include <nested-forward-decl-types.h>

#include <stdint.h>
#include <stdbool.h>

/* Scope: Collision */
static BoundingBox Collision_bounds = {0};

void Collision_setBounds(const BoundingBox* newBounds) {
    Collision_bounds = (*newBounds);
}

BoundingBox Collision_getBounds(void) {
    return Collision_bounds;
}

bool Collision_contains(const Vector2D* point) {
    bool xInRange = point->x >= Collision_bounds.min.x && point->x <= Collision_bounds.max.x;
    bool yInRange = point->y >= Collision_bounds.min.y && point->y <= Collision_bounds.max.y;
    return xInRange && yInRange;
}

int main(void) {
    Vector2D minPt = (Vector2D){ .x = 0.0, .y = 0.0 };
    Vector2D maxPt = (Vector2D){ .x = 100.0, .y = 100.0 };
    BoundingBox box = (BoundingBox){ .min = minPt, .max = maxPt };
    Collision_setBounds(&box);
    BoundingBox retrieved = Collision_getBounds();
    if (retrieved.min.x != 0.0) return 1;
    if (retrieved.max.x != 100.0) return 2;
    Vector2D inside = (Vector2D){ .x = 50.0, .y = 50.0 };
    Vector2D outside = (Vector2D){ .x = 150.0, .y = 50.0 };
    bool insideResult = Collision_contains(&inside);
    if (insideResult != true) return 3;
    bool outsideResult = Collision_contains(&outside);
    if (outsideResult != false) return 4;
    return 0;
}
