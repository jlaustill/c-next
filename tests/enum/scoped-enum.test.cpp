/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include "scoped-enum.test.hpp"

#include <stdint.h>
#include <stdbool.h>

// ADR-017: Scoped Enum Test
// Tests enums declared inside scopes with proper prefixing
extern const uint8_t defaultValue = 3U;

/* Scope: Motor */
Motor_State Motor_current = Motor_State_IDLE;

uint8_t Motor_start(void) {
    Motor_current = Motor_State_RUNNING;
    return 1;
}

uint8_t Motor_stop(void) {
    Motor_current = Motor_State_IDLE;
    return defaultValue;
}

bool Motor_isRunning(void) {
    const Motor_State currentState = Motor_current;
    if (currentState == Motor_State_RUNNING) {
        return true;
    }
    return false;
}

// Usage from outside the scope
Motor_State externalState = Motor_State_IDLE;

int main(void) {
    Motor_start();
    if (Motor_current == Motor_State_RUNNING) {
        externalState = Motor_State_STALLED;
    }
}
