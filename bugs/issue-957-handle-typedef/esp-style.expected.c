/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include "esp-style.test.h"

// test-transpile-only
// Issue #957: ESP-IDF style handle with no struct definition
//
// When typedef is `typedef struct X *Y` and struct X is NEVER defined,
// the type is ALREADY a pointer. No extra * should be added.
#include "esp_style.h"

#include <stdint.h>

/* Scope: SPI */
static spi_device_handle_t SPI_device = {0};

void SPI_init(void) {
    spi_device_init(&SPI_device);
}

void SPI_write(uint8_t data) {
    spi_device_write(SPI_device, data);
}

int main(void) {
    SPI_init();
    SPI_write(42U);
    return 0;
}
