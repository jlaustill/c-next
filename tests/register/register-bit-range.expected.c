/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include <stdint.h>

/* test-coverage: 12-bit-range-access */
// Tests: Bit range access on register members using [start, width] syntax
/* Register: TIMER @ 0x40010000 */
#define TIMER_CTRL (*(volatile uint32_t*)(0x40010000 + 0x00))
#define TIMER_PRESCALE (*(volatile uint32_t*)(0x40010000 + 0x04))
#define TIMER_VALUE (*(volatile uint32_t const *)(0x40010000 + 0x08))

/* Register: CONFIG @ 0x40020000 */
#define CONFIG_MODE (*(volatile uint32_t*)(0x40020000 + 0x00))
#define CONFIG_OPTIONS (*(volatile uint32_t*)(0x40020000 + 0x04))

void setTimerPrescaler(uint8_t* prescaler) {
    TIMER_PRESCALE = (TIMER_PRESCALE & ~(0xFFU << 0)) | (((*prescaler) & 0xFFU) << 0);
}

void setTimerMode(uint8_t* mode) {
    TIMER_CTRL = (TIMER_CTRL & ~(((1U << 4) - 1) << 0)) | (((*mode) & ((1U << 4) - 1)) << 0);
}

void setTimerFlags(uint8_t* flags) {
    TIMER_CTRL = (TIMER_CTRL & ~(((1U << 4) - 1) << 4)) | (((*flags) & ((1U << 4) - 1)) << 4);
}

void configureOptions(uint16_t* opts) {
    CONFIG_OPTIONS = (CONFIG_OPTIONS & ~(0xFFFFU << 0)) | (((*opts) & 0xFFFFU) << 0);
}

uint8_t readTimerMode(void) {
    return ((TIMER_CTRL) & ((1U << 4) - 1));
}

uint8_t readTimerFlags(void) {
    return ((TIMER_CTRL >> 4) & ((1U << 4) - 1));
}

int main(void) {
    setTimerPrescaler(&(uint8_t){100});
    setTimerMode(&(uint8_t){5});
    setTimerFlags(&(uint8_t){0x0F});
    configureOptions(&(uint16_t){0x1234});
    uint8_t mode = readTimerMode();
    uint8_t flags = readTimerFlags();
}
