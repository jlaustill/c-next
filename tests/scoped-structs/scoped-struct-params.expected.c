/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include "scoped-struct-params.test.h"

#include <stdint.h>
#include <stdbool.h>

// test-execution
// Tests: Scoped structs passed as function parameters
/* Scope: Math */

void Math_add(Math_Vec2* result, const Math_Vec2* a, const Math_Vec2* b) {
    result->x = a->x + b->x;
    result->y = a->y + b->y;
}

void Math_scale(Math_Vec2* v, int32_t factor) {
    v->x = v->x * factor;
    v->y = v->y * factor;
}

int32_t Math_dot(const Math_Vec2* a, const Math_Vec2* b) {
    return a->x * b->x + a->y * b->y;
}

bool Math_equals(const Math_Vec2* a, const Math_Vec2* b) {
    if (a->x == b->x && a->y == b->y) {
        return true;
    }
    return false;
}

void Math_copy(Math_Vec2* dest, const Math_Vec2* src) {
    dest->x = src->x;
    dest->y = src->y;
}

int main(void) {
    Math_Vec2 v1 = {0};
    Math_Vec2 v2 = {0};
    Math_Vec2 result = {0};
    v1.x = 3;
    v1.y = 4;
    v2.x = 1;
    v2.y = 2;
    Math_add(&result, &v1, &v2);
    if (result.x != 4) return 1;
    if (result.y != 6) return 2;
    Math_scale(&v1, 2);
    if (v1.x != 6) return 3;
    if (v1.y != 8) return 4;
    v1.x = 2;
    v1.y = 3;
    v2.x = 4;
    v2.y = 5;
    int32_t dp = Math_dot(&v1, &v2);
    if (dp != 23) return 5;
    v1.x = 10;
    v1.y = 20;
    v2.x = 10;
    v2.y = 20;
    bool eq = Math_equals(&v1, &v2);
    if (eq != true) return 6;
    v2.y = 21;
    eq = Math_equals(&v1, &v2);
    if (eq != false) return 7;
    Math_copy(&result, &v1);
    if (result.x != 10) return 8;
    if (result.y != 20) return 9;
    return 0;
}
