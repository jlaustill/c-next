/* test-execution */
// ADR-017: Basic Enum Test
// Tests basic enum declaration, usage, and code generation

// Simple enum with auto-incrementing values
enum State {
    IDLE,
    RUNNING,
    PAUSED,
    ERROR
}

// Enum with explicit values
enum Command {
    READ  <- 0x01,
    WRITE <- 0x02,
    ERASE <- 0x04,
    RESET <- 0xFF
}

// Enum with bit flag pattern
enum Flags {
    NONE       <- 0,
    READABLE   <- 1,
    WRITABLE   <- 2,
    EXECUTABLE <- 4
}

State currentState <- State.IDLE;
Command lastCmd <- Command.READ;

u32 main() {
    // Test auto-increment values
    if ((u32)State.IDLE != 0) {
        return 1;
    }
    if ((u32)State.RUNNING != 1) {
        return 2;
    }

    // Test explicit values
    if ((u32)Command.ERASE != 0x04) {
        return 3;
    }
    if ((u32)Command.RESET != 0xFF) {
        return 4;
    }

    // Test assignment and comparison
    currentState <- State.RUNNING;
    if (currentState != State.RUNNING) {
        return 5;
    }

    return 0;
}
