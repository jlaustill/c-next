/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include <stdint.h>

// ADR-044: Overflow helper functions
#include <limits.h>

static inline uint16_t cnx_clamp_add_u16(uint16_t a, uint32_t b) {
    if (b > (uint32_t)(UINT16_MAX - a)) return UINT16_MAX;
    uint16_t result;
    if (__builtin_add_overflow(a, (uint16_t)b, &result)) return UINT16_MAX;
    return result;
}

static inline uint32_t cnx_clamp_add_u32(uint32_t a, uint64_t b) {
    if (b > (uint64_t)(UINT32_MAX - a)) return UINT32_MAX;
    uint32_t result;
    if (__builtin_add_overflow(a, (uint32_t)b, &result)) return UINT32_MAX;
    return result;
}

static inline uint8_t cnx_clamp_add_u8(uint8_t a, uint32_t b) {
    if (b > (uint32_t)(UINT8_MAX - a)) return UINT8_MAX;
    uint8_t result;
    if (__builtin_add_overflow(a, (uint8_t)b, &result)) return UINT8_MAX;
    return result;
}

static inline uint32_t cnx_clamp_mul_u32(uint32_t a, uint64_t b) {
    if (b != 0 && a > UINT32_MAX / b) return UINT32_MAX;
    uint32_t result;
    if (__builtin_mul_overflow(a, (uint32_t)b, &result)) return UINT32_MAX;
    return result;
}

static inline uint32_t cnx_clamp_sub_u32(uint32_t a, uint64_t b) {
    if (b > (uint64_t)a) return 0;
    uint32_t result;
    if (__builtin_sub_overflow(a, (uint32_t)b, &result)) return 0;
    return result;
}

/* test-no-warnings */
// test-execution
// Tests: GCC -Wstringop-overflow false positive with clamp helpers (Issue #231)
// Validates: Clamp compound assignment should not trigger false warnings
// Coverage: __builtin_*_overflow allows GCC to track value bounds correctly
int main(void) {
    uint32_t index = 100U;
    index = cnx_clamp_add_u32(index, 50U);
    if (index != 150) return 1;
    index = cnx_clamp_sub_u32(index, 50U);
    if (index != 100) return 2;
    uint32_t mult_val = 5U;
    mult_val = cnx_clamp_mul_u32(mult_val, 10U);
    if (mult_val != 50) return 3;
    uint32_t overflow_test = 4294967290U;
    overflow_test = cnx_clamp_add_u32(overflow_test, 100U);
    if (overflow_test != 4294967295) return 4;
    uint32_t underflow_test = 10U;
    underflow_test = cnx_clamp_sub_u32(underflow_test, 100U);
    if (underflow_test != 0) return 5;
    uint32_t mul_overflow = 100000U;
    mul_overflow = cnx_clamp_mul_u32(mul_overflow, 100000U);
    if (mul_overflow != 4294967295) return 6;
    uint8_t byte_val = 100U;
    byte_val = cnx_clamp_add_u8(byte_val, 50U);
    if (byte_val != 150) return 7;
    byte_val = cnx_clamp_add_u8(byte_val, 200U);
    if (byte_val != 255) return 8;
    uint16_t short_val = 60000U;
    short_val = cnx_clamp_add_u16(short_val, 10000U);
    if (short_val != 65535) return 9;
    return 0;
}
