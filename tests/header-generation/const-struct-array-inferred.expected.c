/**
 * Generated by C-Next Transpiler
 * A safer C for embedded systems
 */

#include <stdint.h>

// Tests: Issue #636 - Const struct array with inferred size must include dimension in header
// This is a regression test to ensure headers correctly declare array dimensions
// when the size is inferred from an initializer.
typedef struct TItem {
    uint32_t id;
    uint16_t value;
} TItem;

// Key case: const struct array with inferred size []
// Header MUST generate: extern const TItem ITEMS[3];
// NOT: extern const TItem ITEMS;  (this breaks cross-file compilation)
extern const TItem ITEMS[3] = {(TItem){ .id = 1, .value = 100 }, (TItem){ .id = 2, .value = 200 }, (TItem){ .id = 3, .value = 300 }};

// Also test: non-const struct array with inferred size
TItem mutableItems[2] = {(TItem){ .id = 10, .value = 1000 }, (TItem){ .id = 20, .value = 2000 }};

// Also test: const primitive array with inferred size
extern const uint8_t SIZES[4] = {10, 20, 30, 40};

// Also test: const array with explicit size (control case)
extern const int32_t EXPLICIT[2] = {100, 200};

extern const uint8_t ITEM_COUNT = 3;

int main(void) {
    uint32_t total = 0;
    for (uint8_t i = 0; i < ITEM_COUNT; i = i + 1) {
        TItem item = ITEMS[i];
        total = total + item.value;
    }
}
